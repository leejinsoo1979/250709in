# 🏠 가구 에디터 (Furniture Editor)

## 🌟 데모 실행하기

- **[🚀 최신 데모(Vercel)](https://250709in.vercel.app)**
  - 항상 최신 버전이 배포됩니다.
  - 다크모드/라이트모드 지원
  - 반응형 디자인으로 모든 디바이스 호환
  - 최신 업데이트: DXF 한글 지원, 분절공간 입력 개선, 투명 가이드 메쉬

---

## 📝 프로젝트 소개
React와 Three.js를 활용한 인터랙티브 3D 가구 배치 에디터입니다. 드래그 앤 드롭으로 가구를 배치하고, 실시간으로 3D 렌더링을 확인할 수 있습니다. 완전한 다크모드 지원과 직관적인 사용자 인터페이스를 제공합니다.

## ✨ 주요 기능

### 🌙 테마 시스템
- **다크모드/라이트모드 완전 지원**: 모든 UI 컴포넌트 테마 대응
- **동적 파비콘**: 테마에 따라 자동으로 변경되는 파비콘
- **테마 기반 색상**: CSS 변수를 활용한 일관된 디자인 시스템
- **2D/3D 뷰어 테마 연동**: 배경색, 치수선, 가이드 라인 모두 테마 적용

### 🎨 3D 렌더링
- **전문급 렌더링 품질**: 실제 자연광 시스템으로 사실적인 조명
- **실시간 그림자**: 가구 내부 깊이감과 자연스러운 음영
- **고품질 재질**: 목재 질감과 메탈릭 표면의 사실적 표현
- **슬롯 바닥면 시각화**: 가구 배치 영역을 그린색으로 표시
- **2D/3D 자유 전환**: 상부 버튼으로 즉시 모드 변경

### 🏗️ 스마트 가구 배치 시스템
- **드래그 앤 드롭**: 직관적인 가구 배치
- **스마트 스냅**: 자동 정렬 및 충돌 감지 (슬롯 기반)
- **동적 슬롯 계산**: 400-600mm 최적 크기 자동 조정
- **기둥 침범 대응**: 기둥 배치 시 가구 크기 자동 조정
- **오픈형 기본 배치**: 가구 배치 시 도어 없이 시작
- **다양한 모듈**: 서랍, 선반, 도어 등 다양한 가구 구성

### 🖱️ 향상된 조작성
- **2D 모드 트랙패드 지원**: 두 손가락 드래그로 화면 이동
- **최적화된 줌 속도**: 2D/3D 모드별 차별화된 줌 경험
- **키보드 단축키**: Shift/Option 키로 팬 이동 지원
- **반응형 컨트롤**: 디바이스별 최적화된 조작 방식

### 🚪 도어 & 하드웨어 설정
- **도어 방향 선택**: 가구 더블클릭으로 힌지 위치 설정
- **좌/우 힌지**: 왼쪽(오른쪽으로 열림) / 오른쪽(왼쪽으로 열림)
- **도어 추가/제거**: 오픈형 ↔ 도어형 자유 변경
- **재질 통일**: 프레임과 도어 색상 일관성 보장

### 🔧 고급 커스터마이징
- **공간 설정**: 폭, 높이, 깊이 자유 조정
- **받침대 옵션**: 바닥 설치형 / 띄워서 설치 / 없음
- **재질 변경**: 다양한 마감재와 색상 선택 (밝기 조절 포함)
- **실시간 미리보기**: 변경사항 즉시 반영
- **컬럼 시스템**: A, B, C형 기둥으로 공간 분할 및 활용

### 📐 정밀한 설계 도구
- **스마트 뷰 전환**: 3D 상부 버튼 → 자동 2D 상부 모드
- **테마 기반 CAD**: 다크모드 대응 그리드 및 치수선
- **동적 치수선**: 받침대 설정에 따른 자동 표시/숨김
- **DXF 내보내기**: 설계 도면 파일 생성
- **거리 표시**: 기둥과 가구 간 정확한 거리 측정

### 🗂️ 프로젝트 관리
- **Firebase 연동**: 클라우드 기반 프로젝트 저장/불러오기
- **파일트리 시스템**: 직관적인 프로젝트 구조 관리
- **향상된 검색**: 프로젝트 이름 기반 빠른 검색
- **테마 기반 UI**: 모든 관리 도구 다크모드 지원

## 🛠️ 기술 스택

### Frontend
- **React 18** - 최신 함수형 컴포넌트
- **TypeScript** - 타입 안정성
- **Three.js** - 3D 렌더링 엔진
- **React Three Fiber** - React와 Three.js 통합
- **CSS Modules** - 스타일 캡슐화

### 상태 관리
- **Zustand** - 경량 상태 관리
- **React Context** - 테마 및 전역 상태 관리
- **Derived Stores** - 계산된 상태 최적화

### 백엔드 & 클라우드
- **Firebase Auth** - 사용자 인증
- **Firestore** - 프로젝트 데이터 저장
- **Firebase Storage** - 썸네일 및 에셋 관리

### 빌드 도구
- **Vite** - 빠른 개발 서버
- **ESBuild** - 고성능 번들링
- **TypeScript** - 컴파일 타임 타입 검사

## 🚀 로컬 데모 실행 방법

```bash
# 저장소 클론
git clone https://github.com/leejinsoo1979/250709in.git
cd 250709in

# 의존성 설치
npm install

# 데모 실행(개발 서버)
npm run dev

# 브라우저에서 http://localhost:5173 접속
```

## 📦 빌드 및 배포

```bash
# 프로덕션 빌드
npm run build

# 미리보기
npm run preview

# 타입 검사
npm run typecheck

# ESLint 검사
npm run lint

# 테스트 실행
npm run test

# Vercel 배포 (추천)
npx vercel --prod
```

### 🌐 배포 플랫폼
- **Vercel**: 빠른 배포, 자동 HTTPS, 글로벌 CDN
- **GitHub Pages**: 무료 호스팅, GitHub Actions 자동 배포

## 🎯 사용법

### 기본 워크플로우
1. **테마 선택**: 우상단 테마 토글로 다크/라이트 모드 선택
2. **공간 설정**: 우측 패널에서 방 크기와 받침대 타입 조정
3. **기둥 배치**: 필요시 A, B, C형 기둥으로 공간 분할
4. **가구 선택**: 좌측 갤러리에서 원하는 가구 모듈 선택
5. **배치**: 드래그 앤 드롭으로 3D 공간에 배치 (오픈형으로 기본 배치)
6. **도어 설정**: 가구 더블클릭 → 도어 추가 및 힌지 방향 선택
7. **커스터마이징**: 재질, 색상, 크기 조정 (밝기 슬라이더 포함)
8. **뷰 전환**: 3D 상부 버튼 클릭 시 자동으로 2D 상부 모드로 전환
9. **내보내기**: DXF 파일로 설계 도면 저장

### 핵심 팁
- **슬롯 시스템**: 그린색 바닥면으로 배치 가능한 영역 확인
- **동적 크기 조정**: 슬롯 크기는 400-600mm 범위에서 자동 최적화
- **도어 없이 시작**: 모든 가구는 오픈형으로 배치되어 필요시 도어 추가
- **받침대 연동**: 받침대 설정에 따라 치수선이 자동으로 표시/숨김
- **트랙패드 활용**: 2D 모드에서 두 손가락 드래그로 편리한 화면 이동
- **테마 자동 적용**: 시스템 설정에 따라 자동으로 다크/라이트 모드 적용

### 2D 모드 조작법
- **두 손가락 드래그**: 화면 팬 이동
- **핀치 줌**: 확대/축소
- **Shift + 드래그**: 팬 이동 (키보드 사용자)
- **마우스 휠**: 줌 인/아웃

## 🔍 주요 컴포넌트

### 3D 뷰어
- `Space3DView.tsx` - 메인 3D 렌더링 컨테이너
- `ThreeCanvas.tsx` - Three.js 캔버스 관리 (테마 연동)
- `Room.tsx` - 방 공간 렌더링 (그라데이션 벽면)

### 가구 모듈
- `FurnitureItem.tsx` - 개별 가구 아이템
- `ModuleGallery.tsx` - 가구 선택 갤러리
- `DoorModule.tsx`, `DrawerRenderer.tsx` - 각종 가구 타입

### 제어 패널
- `RightPanel.tsx` - 설정 및 속성 패널 (다크모드 지원)
- `MaterialPanel.tsx` - 재질 선택
- `ExportPanel.tsx` - DXF 내보내기

### 테마 시스템
- `ThemeContext.tsx` - 중앙 집중식 테마 관리
- `ThemeSelector.tsx` - 테마 토글 컴포넌트
- `*.module.css` - CSS 변수 기반 테마 스타일

### 대시보드
- `SimpleDashboard.tsx` - 메인 프로젝트 관리 화면
- `FileTree.tsx` - 파일 트리 (테마 지원)
- `ProjectDropdown.tsx` - 프로젝트 선택 드롭다운

## 🎨 렌더링 품질 특징

### 전문급 조명 시스템
- **자연광 시뮬레이션**: 3200K 따뜻한 햇빛 + 6500K 차가운 스카이라이트
- **다중 광원**: 창문광, 천장 반사광, 바운스 라이트
- **고품질 그림자**: 4K 그림자맵, 부드러운 음영 처리
- **테마 연동**: 다크모드에서 적절한 조명 조정

### 사실적 재질
- **목재 질감**: PBR 기반 물리적 렌더링
- **적절한 반사**: 자연스러운 빛 반사와 산란
- **깊이감**: 캐비넷 내부의 자연스러운 그라데이션
- **테마 색상**: 선택한 테마에 맞는 재질 렌더링

## 🌙 다크모드 특징

### 완전한 테마 지원
- **모든 UI 컴포넌트**: 버튼, 패널, 모달, 드롭다운 등 전면 지원
- **3D 뷰어 연동**: 배경색과 그리드 색상 자동 변경
- **치수선 및 가이드**: 테마에 맞는 색상으로 표시
- **동적 파비콘**: 브라우저 탭 아이콘도 테마에 맞게 변경

### 사용자 경험
- **시스템 설정 감지**: OS 다크모드 설정 자동 인식
- **수동 전환**: 언제든 사용자가 직접 테마 변경 가능
- **상태 유지**: 브라우저 새로고침 후에도 선택한 테마 유지
- **부드러운 전환**: 테마 변경 시 자연스러운 애니메이션

## 📱 브라우저 호환성
- Chrome 90+
- Firefox 90+
- Safari 14+
- Edge 90+
- 모바일 브라우저 지원

## 🚀 성능 최적화

### 렌더링 최적화
- **Chunk Splitting**: 코드 분할로 초기 로딩 속도 향상
- **Material Caching**: Three.js 재질 캐싱으로 메모리 사용량 최적화
- **WebGL 메모리 관리**: 자동 정리 시스템으로 메모리 누수 방지

### 사용자 경험 최적화
- **Debounced Updates**: 사용자 입력에 대한 지연된 업데이트
- **Lazy Loading**: 필요한 시점에만 컴포넌트 로드
- **Responsive Design**: 모든 화면 크기에 최적화

## 🧪 테스트

```bash
# 단위 테스트 실행
npm run test

# 커버리지 포함 테스트
npm run test:coverage

# UI 테스트
npm run test:ui

# 특정 파일 테스트
npm run test -- furniture
```

## 🤝 기여하기
이슈나 개선 사항이 있으시면 언제든 Issue를 등록하거나 Pull Request를 보내주세요!

### 개발 가이드라인
1. TypeScript 타입 정의 필수
2. CSS Modules 사용 권장
3. 테마 시스템 준수 (CSS 변수 활용)
4. 테스트 코드 작성 권장

## 📄 라이선스
MIT License

---

**Made with ❤️ using React + Three.js + TypeScript**

*최근 업데이트: 2025년 1월 - 완전한 다크모드 지원, 향상된 사용자 경험, 성능 최적화*