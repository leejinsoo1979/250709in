interface FAQ {
  keywords: string[];
  answer: string;
}

export const faqData: FAQ[] = [
  // í”„ë¡œì íŠ¸ ê´€ë ¨
  {
    keywords: ['í”„ë¡œì íŠ¸', 'ì €ì¥', 'ì„¸ì´ë¸Œ', 'save', 'project'],
    answer: 'í”„ë¡œì íŠ¸ëŠ” ìë™ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤. ìƒë‹¨ì˜ "ì €ì¥" ë²„íŠ¼ì„ í´ë¦­í•˜ê±°ë‚˜ Ctrl+S (Mac: Cmd+S)ë¥¼ ëˆŒëŸ¬ ìˆ˜ë™ìœ¼ë¡œ ì €ì¥í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.',
  },
  {
    keywords: ['ë¶ˆëŸ¬ì˜¤ê¸°', 'ë¡œë“œ', 'load', 'ì—´ê¸°', 'open'],
    answer: 'ëŒ€ì‹œë³´ë“œì—ì„œ "ë‚´ í”„ë¡œì íŠ¸" ëª©ë¡ì„ í™•ì¸í•˜ê³  ì›í•˜ëŠ” í”„ë¡œì íŠ¸ë¥¼ í´ë¦­í•˜ë©´ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
  },
  {
    keywords: ['ê³µìœ ', 'share', 'ë‹¤ë¥¸ì‚¬ëŒ'],
    answer: 'í”„ë¡œì íŠ¸ë¥¼ ê³µìœ í•˜ë ¤ë©´ ìƒë‹¨ì˜ "ê³µìœ " ë²„íŠ¼ì„ í´ë¦­í•˜ê³  ê³µìœ í•  ì‚¬ìš©ìì˜ ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”. ì¡°íšŒ ê¶Œí•œ ë˜ëŠ” í¸ì§‘ ê¶Œí•œì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
  },

  // ê°€êµ¬ ê´€ë ¨
  {
    keywords: ['ê°€êµ¬', 'ë°°ì¹˜', 'ì¶”ê°€', 'furniture', 'ëª¨ë“ˆ'],
    answer: 'ì¢Œì¸¡ ì‚¬ì´ë“œë°”ì—ì„œ ì›í•˜ëŠ” ê°€êµ¬ë¥¼ ì„ íƒí•˜ê³  3D ë·°ì—ì„œ ì›í•˜ëŠ” ìœ„ì¹˜ë¥¼ í´ë¦­í•˜ì—¬ ë°°ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°°ì¹˜ëœ ê°€êµ¬ëŠ” ë“œë˜ê·¸ë¡œ ì´ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
  },
  {
    keywords: ['ì‚­ì œ', 'delete', 'ì œê±°', 'remove'],
    answer: 'ì‚­ì œí•˜ë ¤ëŠ” ê°€êµ¬ë¥¼ ì„ íƒí•˜ê³  Delete í‚¤ë¥¼ ëˆ„ë¥´ê±°ë‚˜, ê°€êµ¬ë¥¼ ì„ íƒí•œ í›„ ìš°ì¸¡ íŒ¨ë„ì˜ "ì‚­ì œ" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.',
  },
  {
    keywords: ['íšŒì „', 'rotate', 'ëŒë¦¬ê¸°'],
    answer: 'ê°€êµ¬ë¥¼ ì„ íƒí•˜ê³  íšŒì „ í•¸ë“¤ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜, ìš°ì¸¡ íŒ¨ë„ì—ì„œ íšŒì „ ê°ë„ë¥¼ ì§ì ‘ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
  },
  {
    keywords: ['í¬ê¸°', 'size', 'ì¹˜ìˆ˜', 'ì‚¬ì´ì¦ˆ'],
    answer: 'ê°€êµ¬ë¥¼ ì„ íƒí•˜ë©´ ìš°ì¸¡ íŒ¨ë„ì—ì„œ ê°€ë¡œ, ì„¸ë¡œ, ë†’ì´ë¥¼ ì¡°ì ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¼ë¶€ ëª¨ë“ˆì‹ ê°€êµ¬ëŠ” ë¯¸ë¦¬ ì •ì˜ëœ í¬ê¸°ë§Œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.',
  },

  // ê³µê°„ ì„¤ì •
  {
    keywords: ['ê³µê°„', 'ë°©', 'space', 'room', 'ì¹˜ìˆ˜'],
    answer: 'ì¢Œì¸¡ íŒ¨ë„ì˜ "ê³µê°„ ì„¤ì •"ì—ì„œ ë°©ì˜ ê°€ë¡œ, ì„¸ë¡œ, ë†’ì´ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë²½ ì¬ì§ˆê³¼ ë°”ë‹¥ ì¬ì§ˆë„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
  },
  {
    keywords: ['ì¬ì§ˆ', 'material', 'í…ìŠ¤ì²˜', 'texture'],
    answer: '"ìŠ¤íƒ€ì¼ë§" íƒ­ì—ì„œ ë²½, ë°”ë‹¥, ì²œì¥ì˜ ì¬ì§ˆì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ì–‘í•œ ëª©ì¬, íƒ€ì¼, í˜ì¸íŠ¸ ì˜µì…˜ì´ ìˆìŠµë‹ˆë‹¤.',
  },

  // ë·° ë° ì¹´ë©”ë¼
  {
    keywords: ['2D', '3D', 'ë·°', 'view', 'ì‹œì '],
    answer: 'ìƒë‹¨ì˜ ë·° ì „í™˜ ë²„íŠ¼ìœ¼ë¡œ 2D í‰ë©´ë„ì™€ 3D ì…ì²´ë„ë¥¼ ì „í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 3D ë·°ì—ì„œëŠ” ë§ˆìš°ìŠ¤ ë“œë˜ê·¸ë¡œ ì‹œì ì„ íšŒì „í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
  },
  {
    keywords: ['ì¤Œ', 'zoom', 'í™•ëŒ€', 'ì¶•ì†Œ'],
    answer: 'ë§ˆìš°ìŠ¤ íœ ì„ ì‚¬ìš©í•˜ê±°ë‚˜ íŠ¸ë™íŒ¨ë“œì˜ í•€ì¹˜ ì œìŠ¤ì²˜ë¡œ í™•ëŒ€/ì¶•ì†Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
  },

  // DXF ë° ë‚´ë³´ë‚´ê¸°
  {
    keywords: ['DXF', 'dxf', 'ë‚´ë³´ë‚´ê¸°', 'export', 'ë„ë©´'],
    answer: 'DXF íŒŒì¼ë¡œ ë‚´ë³´ë‚´ë ¤ë©´ ìƒë‹¨ ë©”ë‰´ì—ì„œ "ë‚´ë³´ë‚´ê¸°" > "DXF"ë¥¼ ì„ íƒí•˜ì„¸ìš”. ê¸°ìˆ  ë„ë©´ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” 2D í‰ë©´ë„ê°€ ìƒì„±ë©ë‹ˆë‹¤.',
  },
  {
    keywords: ['ë‹¤ìš´ë¡œë“œ', 'download', 'ì €ì¥'],
    answer: 'í”„ë¡œì íŠ¸ë¥¼ ë¡œì»¬ì— ì €ì¥í•˜ë ¤ë©´ "ë‚´ë³´ë‚´ê¸°" ë©”ë‰´ì—ì„œ ì›í•˜ëŠ” í˜•ì‹ì„ ì„ íƒí•˜ì„¸ìš”. DXF, PNG, PDF ë“±ì„ ì§€ì›í•©ë‹ˆë‹¤.',
  },

  // ê³„ì • ë° í”Œëœ
  {
    keywords: ['í”Œëœ', 'plan', 'ìš”ê¸ˆ', 'ê²°ì œ', 'êµ¬ë…'],
    answer: 'í˜„ì¬ ë¬´ë£Œ í”Œëœì„ ì‚¬ìš© ì¤‘ì…ë‹ˆë‹¤. Pro í”Œëœìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ë©´ ë¬´ì œí•œ í”„ë¡œì íŠ¸, ê³ ê¸‰ ì¬ì§ˆ, ìš°ì„  ì§€ì›ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëŒ€ì‹œë³´ë“œì˜ "í”Œëœ" ë©”ë‰´ì—ì„œ í™•ì¸í•˜ì„¸ìš”.',
  },
  {
    keywords: ['ê³„ì •', 'account', 'ë¡œê·¸ì¸', 'login'],
    answer: 'ìš°ì¸¡ ìƒë‹¨ì˜ í”„ë¡œí•„ ì•„ì´ì½˜ì„ í´ë¦­í•˜ë©´ ê³„ì • ì„¤ì •, ë¡œê·¸ì•„ì›ƒ ë“±ì˜ ì˜µì…˜ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
  },

  // ê¸°ìˆ  ì§€ì›
  {
    keywords: ['ë„ì›€', 'help', 'ë¬¸ì˜', 'ì§€ì›', 'support'],
    answer: 'ì¶”ê°€ ë„ì›€ì´ í•„ìš”í•˜ì‹œë©´ support@uable.co.krë¡œ ë¬¸ì˜í•´ ì£¼ì„¸ìš”. í‰ì¼ 09:00-18:00ì— ë‹µë³€ë“œë¦½ë‹ˆë‹¤.',
  },
  {
    keywords: ['ë²„ê·¸', 'bug', 'ì˜¤ë¥˜', 'error', 'ë¬¸ì œ'],
    answer: 'ë²„ê·¸ë¥¼ ë°œê²¬í•˜ì…¨ë‹¤ë©´ support@uable.co.krë¡œ ìƒì„¸í•œ ë‚´ìš©ì„ ë³´ë‚´ì£¼ì„¸ìš”. ìŠ¤í¬ë¦°ìƒ·ê³¼ í•¨ê»˜ ë³´ë‚´ì£¼ì‹œë©´ ë” ë¹ ë¥´ê²Œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
  },

  // íŠœí† ë¦¬ì–¼
  {
    keywords: ['íŠœí† ë¦¬ì–¼', 'tutorial', 'ì‚¬ìš©ë²•', 'ì‹œì‘', 'start'],
    answer: 'ëŒ€ì‹œë³´ë“œì˜ "íŠœí† ë¦¬ì–¼" ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ë‹¨ê³„ë³„ ê°€ì´ë“œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¸°ë³¸ ì¡°ì‘ë²•ë¶€í„° ê³ ê¸‰ ê¸°ëŠ¥ê¹Œì§€ ì•ˆë‚´í•©ë‹ˆë‹¤.',
  },

  // ì±—ë´‡ ê´€ë¦¬ (ê´€ë¦¬ììš©)
  {
    keywords: ['ì±—ë´‡', 'chatbot', 'ì±—ë´‡ê´€ë¦¬', 'ì±—ë´‡ì„¤ì •', 'ê´€ë¦¬'],
    answer: 'ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œì—ì„œ "ì±—ë´‡ ê´€ë¦¬" ë©”ë‰´ë¥¼ í†µí•´ ì±—ë´‡ ì„¤ì •ì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¸ì‚¬ë§, ê¸°ë³¸ ë©”ì‹œì§€, FAQ ì§ˆë¬¸/ë‹µë³€ì„ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
  },
  {
    keywords: ['ì¸ì‚¬ë§', 'greeting', 'ì±—ë´‡ì¸ì‚¬ë§', 'í™˜ì˜ë©”ì‹œì§€'],
    answer: 'ì±—ë´‡ ê´€ë¦¬ í˜ì´ì§€ì—ì„œ ì¸ì‚¬ë§ì„ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì±—ë´‡ì´ ì²˜ìŒ ì—´ë¦´ ë•Œ ì‚¬ìš©ìì—ê²Œ í‘œì‹œë˜ëŠ” ë©”ì‹œì§€ì…ë‹ˆë‹¤.',
  },
  {
    keywords: ['ê¸°ë³¸ë©”ì‹œì§€', 'default message', 'ê¸°ë³¸ë‹µë³€', 'ë§¤ì¹­ì‹¤íŒ¨'],
    answer: 'ê¸°ë³¸ ë©”ì‹œì§€ëŠ” ì‚¬ìš©ìì˜ ì§ˆë¬¸ì´ FAQì™€ ë§¤ì¹­ë˜ì§€ ì•Šì„ ë•Œ í‘œì‹œë©ë‹ˆë‹¤. ì±—ë´‡ ê´€ë¦¬ í˜ì´ì§€ì—ì„œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
  },
  {
    keywords: ['FAQ', 'faq', 'ì§ˆë¬¸ë‹µë³€', 'Q&A', 'qa'],
    answer: 'FAQ ê´€ë¦¬ì—ì„œ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ê³¼ ë‹µë³€ì„ ì¶”ê°€, ìˆ˜ì •, ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê° ì§ˆë¬¸ë§ˆë‹¤ ì—¬ëŸ¬ í‚¤ì›Œë“œë¥¼ ì„¤ì •í•˜ì—¬ ë‹¤ì–‘í•œ í‘œí˜„ìœ¼ë¡œ ê²€ìƒ‰ ê°€ëŠ¥í•©ë‹ˆë‹¤.',
  },
];

/**
 * ë‘ ë¬¸ìì—´ ê°„ì˜ ìœ ì‚¬ë„ ê³„ì‚° (0~1 ì‚¬ì´ ê°’)
 * Jaccard ìœ ì‚¬ë„ ê¸°ë°˜
 */
function calculateSimilarity(str1: string, str2: string): number {
  const words1 = new Set(str1.toLowerCase().split(/\s+/));
  const words2 = new Set(str2.toLowerCase().split(/\s+/));

  const intersection = new Set([...words1].filter(x => words2.has(x)));
  const union = new Set([...words1, ...words2]);

  return intersection.size / union.size;
}

/**
 * ì‚¬ìš©ì ì§ˆë¬¸ê³¼ FAQ ë§¤ì¹­ (ìœ ì‚¬ë„ ê¸°ë°˜)
 * @param userInput ì‚¬ìš©ì ì…ë ¥
 * @param defaultMessage ë§¤ì¹­ ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ ë©”ì‹œì§€ (Firebaseì—ì„œ ë¶ˆëŸ¬ì˜¨ ê°’ ì‚¬ìš©)
 */
export function matchQuestion(userInput: string, defaultMessage?: string): string {
  const input = userInput.toLowerCase().trim();

  // ìœ ì‚¬ë„ ê¸°ë°˜ ë§¤ì¹­
  let bestMatch: { faq: FAQ; score: number } | null = null;

  for (const faq of faqData) {
    // ëª¨ë“  í‚¤ì›Œë“œì™€ ìœ ì‚¬ë„ ê³„ì‚°
    for (const keyword of faq.keywords) {
      const keywordLower = keyword.toLowerCase();

      // ì •í™•í•œ ë§¤ì¹­ì€ ìµœê³  ì ìˆ˜
      if (input.includes(keywordLower) || keywordLower.includes(input)) {
        return faq.answer;
      }

      // ìœ ì‚¬ë„ ê³„ì‚°
      const similarity = calculateSimilarity(input, keywordLower);

      if (!bestMatch || similarity > bestMatch.score) {
        bestMatch = { faq, score: similarity };
      }
    }
  }

  // ìœ ì‚¬ë„ ì„ê³„ê°’: 0.3 ì´ìƒì´ë©´ ë‹µë³€ ë°˜í™˜
  if (bestMatch && bestMatch.score >= 0.3) {
    return bestMatch.faq.answer;
  }

  // ë§¤ì¹­ ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ ë‹µë³€ (Firebase ì„¤ì •ê°’ ìš°ì„ )
  if (defaultMessage) {
    return defaultMessage;
  }

  return `ì£„ì†¡í•©ë‹ˆë‹¤. ì •í™•íˆ ì´í•´í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ğŸ˜…\n\në‹¤ìŒê³¼ ê°™ì€ ì£¼ì œë¡œ ì§ˆë¬¸í•´ ì£¼ì„¸ìš”:\n\nâ€¢ í”„ë¡œì íŠ¸ ì €ì¥ ë° ë¶ˆëŸ¬ì˜¤ê¸°\nâ€¢ ê°€êµ¬ ë°°ì¹˜ ë° í¸ì§‘\nâ€¢ ê³µê°„ ì„¤ì • ë° ì¬ì§ˆ\nâ€¢ 2D/3D ë·° ì „í™˜\nâ€¢ DXF ë‚´ë³´ë‚´ê¸°\nâ€¢ í”Œëœ ë° ê³„ì •\n\në˜ëŠ” support@uable.co.krë¡œ ë¬¸ì˜í•´ ì£¼ì„¸ìš”!`;
}
