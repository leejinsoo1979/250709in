import{c as p,d as u,L as f,g}from"./index-BI2j4pBd.js";import"./three-fiber-CJ-4sOHx.js";import"./three-core-CnIHn6i7.js";import"./router-D2gCn4D4.js";import"./store-zO2cKXtg.js";async function I(d,h){try{const o=[],l=p(u,f.projects);let c;try{c=await g(l)}catch(e){if((e==null?void 0:e.code)==="permission-denied"||(e==null?void 0:e.code)==="failed-precondition")return console.log("ðŸ“¦ Projects collection does not exist or no permission. Returning empty list."),{projects:[],error:null};throw e}return c.forEach(e=>{var s,n,r,i,a;const t=e.data();t.userId===d&&o.push({id:e.id,title:t.title,createdAt:t.createdAt,updatedAt:t.updatedAt,furnitureCount:((s=t.stats)==null?void 0:s.furnitureCount)||0,spaceSize:{width:((n=t.spaceConfig)==null?void 0:n.width)||0,height:((r=t.spaceConfig)==null?void 0:r.height)||0,depth:((i=t.spaceConfig)==null?void 0:i.depth)||0},thumbnail:t.thumbnail,folderId:t.folderId,spaceInfo:t.spaceConfig,placedModules:((a=t.furniture)==null?void 0:a.placedModules)||[]})}),o.sort((e,t)=>{var r,i;const s=((r=e.updatedAt)==null?void 0:r.toMillis())||0;return(((i=t.updatedAt)==null?void 0:i.toMillis())||0)-s}),console.log("ðŸ“¦ Found projects in legacy:",o.length),{projects:o,error:null}}catch(o){return console.error("Error listing projects:",o),{projects:[],error:o instanceof Error?o.message:"Failed to list projects"}}}export{I as listProjects};
