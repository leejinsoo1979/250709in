import { initializeApp } from 'firebase/app';
import { getFirestore, collection, addDoc, serverTimestamp, getDocs, query } from 'firebase/firestore';

// Firebase ì„¤ì • (í™˜ê²½ë³€ìˆ˜ì—ì„œ ê°€ì ¸ì˜¤ê¸°)
const firebaseConfig = {
  apiKey: process.env.VITE_FIREBASE_API_KEY,
  authDomain: process.env.VITE_FIREBASE_AUTH_DOMAIN,
  projectId: process.env.VITE_FIREBASE_PROJECT_ID,
  storageBucket: process.env.VITE_FIREBASE_STORAGE_BUCKET,
  messagingSenderId: process.env.VITE_FIREBASE_MESSAGING_SENDER_ID,
  appId: process.env.VITE_FIREBASE_APP_ID,
  measurementId: process.env.VITE_FIREBASE_MEASUREMENT_ID,
};

// Firebase ì´ˆê¸°í™”
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// Q&A ë°ì´í„° (ê°€êµ¬ ì—ë””í„° í”„ë¡œê·¸ë¨ì— íŠ¹í™”)
const qaData = [
  // í”„ë¡œì íŠ¸ ê´€ë ¨
  {
    question: 'í”„ë¡œì íŠ¸ë¥¼ ì–´ë–»ê²Œ ì €ì¥í•˜ë‚˜ìš”?',
    answer: 'í”„ë¡œì íŠ¸ëŠ” ìë™ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤. ìƒë‹¨ì˜ "ì €ì¥" ë²„íŠ¼ì„ í´ë¦­í•˜ê±°ë‚˜ Ctrl+S (Mac: Cmd+S)ë¥¼ ëˆŒëŸ¬ ìˆ˜ë™ ì €ì¥í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ëª¨ë“  í”„ë¡œì íŠ¸ëŠ” í´ë¼ìš°ë“œì— ì•ˆì „í•˜ê²Œ ë³´ê´€ë©ë‹ˆë‹¤.',
    category: 'ê¸°ëŠ¥',
    priority: 3,
    isActive: true,
  },
  {
    question: 'ì €ì¥ëœ í”„ë¡œì íŠ¸ë¥¼ ì–´ë–»ê²Œ ë¶ˆëŸ¬ì˜¤ë‚˜ìš”?',
    answer: 'ëŒ€ì‹œë³´ë“œì—ì„œ "ë‚´ í”„ë¡œì íŠ¸" ëª©ë¡ì„ í™•ì¸í•˜ê³  ì›í•˜ëŠ” í”„ë¡œì íŠ¸ë¥¼ í´ë¦­í•˜ë©´ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í”„ë¡œì íŠ¸ ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.',
    category: 'ê¸°ëŠ¥',
    priority: 3,
    isActive: true,
  },
  {
    question: 'í”„ë¡œì íŠ¸ë¥¼ ë‹¤ë¥¸ ì‚¬ëŒê³¼ ê³µìœ í•  ìˆ˜ ìˆë‚˜ìš”?',
    answer: 'ë„¤, ê°€ëŠ¥í•©ë‹ˆë‹¤. í”„ë¡œì íŠ¸ë¥¼ ê³µìœ í•˜ë ¤ë©´ ìƒë‹¨ì˜ "ê³µìœ " ë²„íŠ¼ì„ í´ë¦­í•˜ê³  ê³µìœ í•  ì‚¬ìš©ìì˜ ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”. ì¡°íšŒ ê¶Œí•œ ë˜ëŠ” í¸ì§‘ ê¶Œí•œì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
    category: 'ê¸°ëŠ¥',
    priority: 2,
    isActive: true,
  },

  // ê°€êµ¬ ë°°ì¹˜ ë° í¸ì§‘
  {
    question: 'ê°€êµ¬ë¥¼ ì–´ë–»ê²Œ ë°°ì¹˜í•˜ë‚˜ìš”?',
    answer: 'ì¢Œì¸¡ ì‚¬ì´ë“œë°”ì—ì„œ ì›í•˜ëŠ” ê°€êµ¬(ëª¨ë“ˆ)ë¥¼ ì„ íƒí•˜ê³  3D ë·°ì—ì„œ ì›í•˜ëŠ” ìœ„ì¹˜ë¥¼ í´ë¦­í•˜ì—¬ ë°°ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°°ì¹˜ëœ ê°€êµ¬ëŠ” ë“œë˜ê·¸ë¡œ ì´ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
    category: 'ê¸°ëŠ¥',
    priority: 3,
    isActive: true,
  },
  {
    question: 'ë°°ì¹˜í•œ ê°€êµ¬ë¥¼ ì‚­ì œí•˜ë ¤ë©´ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?',
    answer: 'ì‚­ì œí•˜ë ¤ëŠ” ê°€êµ¬ë¥¼ ì„ íƒí•˜ê³  Delete í‚¤ë¥¼ ëˆ„ë¥´ê±°ë‚˜, ê°€êµ¬ë¥¼ ì„ íƒí•œ í›„ ìš°ì¸¡ íŒ¨ë„ì˜ "ì‚­ì œ" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.',
    category: 'ê¸°ëŠ¥',
    priority: 2,
    isActive: true,
  },
  {
    question: 'ê°€êµ¬ë¥¼ íšŒì „ì‹œí‚¬ ìˆ˜ ìˆë‚˜ìš”?',
    answer: 'ë„¤, ê°€ëŠ¥í•©ë‹ˆë‹¤. ê°€êµ¬ë¥¼ ì„ íƒí•˜ê³  íšŒì „ í•¸ë“¤ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜, ìš°ì¸¡ íŒ¨ë„ì—ì„œ íšŒì „ ê°ë„ë¥¼ ì§ì ‘ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
    category: 'ê¸°ëŠ¥',
    priority: 2,
    isActive: true,
  },
  {
    question: 'ê°€êµ¬ í¬ê¸°ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‚˜ìš”?',
    answer: 'ê°€êµ¬ë¥¼ ì„ íƒí•˜ë©´ ìš°ì¸¡ íŒ¨ë„ì—ì„œ ê°€ë¡œ, ì„¸ë¡œ, ë†’ì´ë¥¼ ì¡°ì ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¼ë¶€ ëª¨ë“ˆì‹ ê°€êµ¬ëŠ” ë¯¸ë¦¬ ì •ì˜ëœ í¬ê¸°ë§Œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.',
    category: 'ê¸°ëŠ¥',
    priority: 2,
    isActive: true,
  },

  // ê³µê°„ ì„¤ì •
  {
    question: 'ë°© í¬ê¸°ë¥¼ ì–´ë–»ê²Œ ì„¤ì •í•˜ë‚˜ìš”?',
    answer: 'ì¢Œì¸¡ íŒ¨ë„ì˜ "ê³µê°„ ì„¤ì •"ì—ì„œ ë°©ì˜ ê°€ë¡œ, ì„¸ë¡œ, ë†’ì´ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¤ì¸¡ ì¹˜ìˆ˜ë¥¼ ì…ë ¥í•˜ë©´ ì •í™•í•œ 3D ëª¨ë¸ë§ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.',
    category: 'ê¸°ëŠ¥',
    priority: 3,
    isActive: true,
  },
  {
    question: 'ë²½ì´ë‚˜ ë°”ë‹¥ ì¬ì§ˆì„ ë³€ê²½í•  ìˆ˜ ìˆë‚˜ìš”?',
    answer: 'ë„¤, "ìŠ¤íƒ€ì¼ë§" íƒ­ì—ì„œ ë²½, ë°”ë‹¥, ì²œì¥ì˜ ì¬ì§ˆì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ì–‘í•œ ëª©ì¬, íƒ€ì¼, í˜ì¸íŠ¸ ì˜µì…˜ì´ ì œê³µë©ë‹ˆë‹¤.',
    category: 'ê¸°ëŠ¥',
    priority: 2,
    isActive: true,
  },

  // ë·° ë° ì¹´ë©”ë¼
  {
    question: '2Dì™€ 3D ë·°ë¥¼ ì–´ë–»ê²Œ ì „í™˜í•˜ë‚˜ìš”?',
    answer: 'ìƒë‹¨ì˜ ë·° ì „í™˜ ë²„íŠ¼ìœ¼ë¡œ 2D í‰ë©´ë„ì™€ 3D ì…ì²´ë„ë¥¼ ì „í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 2DëŠ” ì¹˜ìˆ˜ í™•ì¸ì—, 3DëŠ” ì‹¤ì œ ê³µê°„ê° íŒŒì•…ì— ìœ ìš©í•©ë‹ˆë‹¤.',
    category: 'ê¸°ëŠ¥',
    priority: 3,
    isActive: true,
  },
  {
    question: 'í™”ë©´ì„ í™•ëŒ€/ì¶•ì†Œí•˜ë ¤ë©´?',
    answer: 'ë§ˆìš°ìŠ¤ íœ ì„ ì‚¬ìš©í•˜ê±°ë‚˜ íŠ¸ë™íŒ¨ë“œì˜ í•€ì¹˜ ì œìŠ¤ì²˜ë¡œ í™•ëŒ€/ì¶•ì†Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 3D ë·°ì—ì„œëŠ” ë§ˆìš°ìŠ¤ ë“œë˜ê·¸ë¡œ ì‹œì ì„ íšŒì „í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
    category: 'ê¸°ëŠ¥',
    priority: 2,
    isActive: true,
  },

  // DXF ë° ë‚´ë³´ë‚´ê¸°
  {
    question: 'DXF íŒŒì¼ë¡œ ë‚´ë³´ë‚´ê¸°ê°€ ê°€ëŠ¥í•œê°€ìš”?',
    answer: 'ë„¤, ê°€ëŠ¥í•©ë‹ˆë‹¤. DXF íŒŒì¼ë¡œ ë‚´ë³´ë‚´ë ¤ë©´ ìƒë‹¨ ë©”ë‰´ì—ì„œ "ë‚´ë³´ë‚´ê¸°" > "DXF"ë¥¼ ì„ íƒí•˜ì„¸ìš”. ê¸°ìˆ  ë„ë©´ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” 2D í‰ë©´ë„ê°€ ìƒì„±ë©ë‹ˆë‹¤.',
    category: 'ê¸°ëŠ¥',
    priority: 3,
    isActive: true,
  },
  {
    question: 'ì–´ë–¤ í˜•ì‹ìœ¼ë¡œ ë‚´ë³´ë‚¼ ìˆ˜ ìˆë‚˜ìš”?',
    answer: 'DXF, PNG, PDF ë“± ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ë‚´ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. "ë‚´ë³´ë‚´ê¸°" ë©”ë‰´ì—ì„œ ì›í•˜ëŠ” í˜•ì‹ì„ ì„ íƒí•˜ì„¸ìš”.',
    category: 'ê¸°ëŠ¥',
    priority: 2,
    isActive: true,
  },

  // ê³„ì • ë° í”Œëœ
  {
    question: 'ë¬´ë£Œ í”Œëœê³¼ ìœ ë£Œ í”Œëœì˜ ì°¨ì´ëŠ” ë¬´ì—‡ì¸ê°€ìš”?',
    answer: 'ë¬´ë£Œ í”Œëœì€ ê¸°ë³¸ ê¸°ëŠ¥ê³¼ ì œí•œëœ í”„ë¡œì íŠ¸ ìˆ˜ë¥¼ ì œê³µí•©ë‹ˆë‹¤. Pro í”Œëœìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ë©´ ë¬´ì œí•œ í”„ë¡œì íŠ¸, ê³ ê¸‰ ì¬ì§ˆ, ìš°ì„  ì§€ì›, íŒ€ í˜‘ì—… ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
    category: 'ê²°ì œ',
    priority: 2,
    isActive: true,
  },
  {
    question: 'êµ¬ë…ì„ ì–´ë–»ê²Œ ì—…ê·¸ë ˆì´ë“œí•˜ë‚˜ìš”?',
    answer: 'ëŒ€ì‹œë³´ë“œì˜ "êµ¬ë… ê´€ë¦¬" ë©”ë‰´ì—ì„œ í”Œëœì„ ì„ íƒí•˜ê³  ê²°ì œë¥¼ ì§„í–‰í•˜ë©´ ë©ë‹ˆë‹¤. ì‹ ìš©ì¹´ë“œ, ê³„ì¢Œì´ì²´ ë“± ë‹¤ì–‘í•œ ê²°ì œ ìˆ˜ë‹¨ì„ ì§€ì›í•©ë‹ˆë‹¤.',
    category: 'ê²°ì œ',
    priority: 2,
    isActive: true,
  },

  // ê¸°ìˆ  ì§€ì›
  {
    question: 'ë¬¸ì œê°€ ìƒê¸°ë©´ ì–´ë””ì— ë¬¸ì˜í•˜ë‚˜ìš”?',
    answer: 'ê¸°ìˆ  ì§€ì›ì´ í•„ìš”í•˜ì‹œë©´ ìš°ì¸¡ í•˜ë‹¨ì˜ ì±—ë´‡ìœ¼ë¡œ ë¨¼ì € ë¬¸ì˜í•´ ì£¼ì„¸ìš”. ì¶”ê°€ ë„ì›€ì´ í•„ìš”í•˜ì‹œë©´ support@befun.comìœ¼ë¡œ ë©”ì¼ì„ ë³´ë‚´ì£¼ì„¸ìš”. í‰ì¼ 09:00-18:00ì— ë‹µë³€ë“œë¦½ë‹ˆë‹¤.',
    category: 'ê¸°ìˆ ì§€ì›',
    priority: 3,
    isActive: true,
  },
  {
    question: 'ë²„ê·¸ë¥¼ ë°œê²¬í–ˆì–´ìš”. ì–´ë–»ê²Œ ì‹ ê³ í•˜ë‚˜ìš”?',
    answer: 'ë²„ê·¸ë¥¼ ë°œê²¬í•˜ì…¨ë‹¤ë©´ support@befun.comìœ¼ë¡œ ë‹¤ìŒ ì •ë³´ë¥¼ ë³´ë‚´ì£¼ì„¸ìš”: 1) ë²„ê·¸ ë°œìƒ ìƒí™© ì„¤ëª…, 2) ì¬í˜„ ë°©ë²•, 3) ìŠ¤í¬ë¦°ìƒ·. ë¹ ë¥´ê²Œ í™•ì¸í•˜ê³  ìˆ˜ì •í•˜ê² ìŠµë‹ˆë‹¤.',
    category: 'ê¸°ìˆ ì§€ì›',
    priority: 2,
    isActive: true,
  },

  // CNC ì˜µí‹°ë§ˆì´ì € (ì¶”ê°€ ê¸°ëŠ¥)
  {
    question: 'CNC ì˜µí‹°ë§ˆì´ì €ëŠ” ë¬´ì—‡ì¸ê°€ìš”?',
    answer: 'CNC ì˜µí‹°ë§ˆì´ì €ëŠ” ê°€êµ¬ ë¶€í’ˆì˜ ì ˆë‹¨ ìµœì í™”ë¥¼ ë„ì™€ì£¼ëŠ” ë„êµ¬ì…ë‹ˆë‹¤. ìì¬ ë‚­ë¹„ë¥¼ ìµœì†Œí™”í•˜ê³  ìƒì‚° ë¹„ìš©ì„ ì ˆê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
    category: 'ê¸°ëŠ¥',
    priority: 2,
    isActive: true,
  },
  {
    question: 'ì˜µí‹°ë§ˆì´ì €ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?',
    answer: 'í”„ë¡œì íŠ¸ë¥¼ ì™„ì„±í•œ í›„ ìƒë‹¨ ë©”ë‰´ì—ì„œ "CNC ì˜µí‹°ë§ˆì´ì €"ë¥¼ ì„ íƒí•˜ì„¸ìš”. ìë™ìœ¼ë¡œ ë¶€í’ˆì„ ë°°ì¹˜í•˜ê³  ìµœì ì˜ ì ˆë‹¨ ë°©ë²•ì„ ì œì•ˆí•©ë‹ˆë‹¤.',
    category: 'ê¸°ëŠ¥',
    priority: 2,
    isActive: true,
  },

  // ì¼ë°˜
  {
    question: 'ì²˜ìŒ ì‚¬ìš©í•˜ëŠ”ë° íŠœí† ë¦¬ì–¼ì´ ìˆë‚˜ìš”?',
    answer: 'ë„¤, ìˆìŠµë‹ˆë‹¤. ëŒ€ì‹œë³´ë“œì˜ "íŠœí† ë¦¬ì–¼" ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ë‹¨ê³„ë³„ ê°€ì´ë“œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¸°ë³¸ ì¡°ì‘ë²•ë¶€í„° ê³ ê¸‰ ê¸°ëŠ¥ê¹Œì§€ ì•ˆë‚´í•©ë‹ˆë‹¤.',
    category: 'ì¼ë°˜',
    priority: 3,
    isActive: true,
  },
  {
    question: 'ëª¨ë°”ì¼ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‚˜ìš”?',
    answer: 'í˜„ì¬ëŠ” ë°ìŠ¤í¬í†± ë¸Œë¼ìš°ì €ì— ìµœì í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ëª¨ë°”ì¼ì—ì„œëŠ” í”„ë¡œì íŠ¸ ì¡°íšŒì™€ ê°„ë‹¨í•œ í¸ì§‘ë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë³¸ê²©ì ì¸ ì‘ì—…ì€ PC ì‚¬ìš©ì„ ê¶Œì¥í•©ë‹ˆë‹¤.',
    category: 'ì¼ë°˜',
    priority: 2,
    isActive: true,
  },
];

// ê´€ë¦¬ì UID (í™˜ê²½ë³€ìˆ˜ë‚˜ Firebase Admin SDK ì‚¬ìš© ì‹œ ë³€ê²½ í•„ìš”)
const ADMIN_UID = 'ADMIN_SEED_SCRIPT';

async function seedChatbotQA() {
  console.log('ğŸŒ± ì±—ë´‡ Q&A ë°ì´í„° ì¶”ê°€ ì‹œì‘...');

  try {
    // ê¸°ì¡´ ë°ì´í„° í™•ì¸
    const existingQAs = await getDocs(query(collection(db, 'chatbotQAs')));
    console.log(`ğŸ“Š ê¸°ì¡´ Q&A ê°œìˆ˜: ${existingQAs.size}ê°œ`);

    if (existingQAs.size > 0) {
      const proceed = true; // ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì‹œ ìë™ìœ¼ë¡œ ì§„í–‰
      if (!proceed) {
        console.log('âŒ ì‚¬ìš©ìê°€ ì·¨ì†Œí–ˆìŠµë‹ˆë‹¤.');
        return;
      }
      console.log('âš ï¸ ê¸°ì¡´ ë°ì´í„°ê°€ ìˆì§€ë§Œ ì¶”ê°€ ì§„í–‰í•©ë‹ˆë‹¤.');
    }

    // Q&A ë°ì´í„° ì¶”ê°€
    let successCount = 0;
    let errorCount = 0;

    for (const qa of qaData) {
      try {
        await addDoc(collection(db, 'chatbotQAs'), {
          question: qa.question,
          answer: qa.answer,
          category: qa.category,
          priority: qa.priority,
          isActive: qa.isActive,
          createdBy: ADMIN_UID,
          createdAt: serverTimestamp(),
          updatedAt: serverTimestamp(),
        });
        successCount++;
        console.log(`âœ… ì¶”ê°€ ì™„ë£Œ: ${qa.question.substring(0, 30)}...`);
      } catch (error) {
        errorCount++;
        console.error(`âŒ ì¶”ê°€ ì‹¤íŒ¨: ${qa.question.substring(0, 30)}...`, error);
      }
    }

    console.log('\nğŸ‰ Q&A ë°ì´í„° ì¶”ê°€ ì™„ë£Œ!');
    console.log(`âœ… ì„±ê³µ: ${successCount}ê°œ`);
    console.log(`âŒ ì‹¤íŒ¨: ${errorCount}ê°œ`);
    console.log(`ğŸ“Š ì´ ${successCount + errorCount}ê°œ ì²˜ë¦¬ ì™„ë£Œ\n`);

    // ìµœì¢… í™•ì¸
    const finalQAs = await getDocs(query(collection(db, 'chatbotQAs')));
    console.log(`ğŸ“Š í˜„ì¬ ì´ Q&A ê°œìˆ˜: ${finalQAs.size}ê°œ`);

  } catch (error) {
    console.error('âŒ ì˜¤ë¥˜ ë°œìƒ:', error);
    throw error;
  }
}

// ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
seedChatbotQA()
  .then(() => {
    console.log('âœ… ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì™„ë£Œ');
    process.exit(0);
  })
  .catch((error) => {
    console.error('âŒ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì‹¤íŒ¨:', error);
    process.exit(1);
  });
