# 가구 에디터 사용자 기능 명세서

이 문서는 가구 에디터 애플리케이션의 각 단계별 UI 요소와 기능의 의미를 설명합니다. 사용자가 실제로 활용하는 각 필드, 버튼, 설정 옵션이 어떤 역할을 하는지 상세하게 설명합니다.

## 목차
1. [Step 0: 기본 정보 입력](#step-0-기본-정보-입력)
2. [Configurator: 통합 설정 및 가구 배치](#configurator-통합-설정-및-가구-배치)
   - [공간 설정 탭](#공간-설정-탭)
   - [내부 설정 탭](#내부-설정-탭)
   - [가구 라이브러리](#가구-라이브러리)
3. [2D/3D 뷰어 기능](#2d3d-뷰어-기능)

## Step 0: 기본 정보 입력

### 디자인 제목
현재 디자인할 전체 프로젝트의 이름을 입력하는 필드입니다. 이 이름은 저장된 프로젝트를 구분하는 데 사용되며, 브라우저의 localStorage에 자동으로 저장됩니다.

### 가구 위치 선택
가구가 설치될 공간을 선택합니다. 이 정보는 적합한 가구 유형과 크기 제한을 설정하는 데 활용됩니다.

- **안방**: 주 침실에 설치될 가구
- **작은방**: 서브 침실에 설치될 가구
- **드레스룸**: 옷과 액세서리를 보관하는 공간에 설치될 가구
- **거실**: 거실 공간에 설치될 가구
- **주방**: 주방 공간에 설치될 가구
- **현관**: 현관 공간에 설치될 가구
- **기타**: 위 카테고리에 포함되지 않는 공간에 설치될 가구

### 다음 단계 버튼
입력한 기본 정보를 저장하고 Configurator(통합 설정 및 가구 배치)로 이동합니다.

## Configurator: 통합 설정 및 가구 배치

Configurator는 공간 설정부터 가구 배치까지 모든 과정을 통합한 설정 도구입니다. 3분할 레이아웃으로 구성되어 있습니다:

- **좌측**: 가구 라이브러리 및 배치된 가구 목록
- **가운데**: 실시간 3D 뷰어 (2D/3D 모드 전환 가능)
- **우측**: 탭 기반 컨트롤 패널

### 공간 설정 탭

기존 Step 1과 동일한 기능을 제공하며, 설정 변경 시 3D 뷰어에서 즉시 반영됩니다.

#### 공간 크기
가구가 설치될 공간의 크기를 밀리미터(mm) 단위로 설정합니다.

- **폭**: 가구의 좌우 너비를 설정합니다. 1200mm부터 8000mm 사이의 값만 입력할 수 있습니다.
- **높이**: 가구의 상하 높이를 설정합니다. 1500mm부터 2500mm 사이의 값만 입력할 수 있습니다.
- **실시간 유효성 검사**: 범위를 벗어난 값 입력 시 빨간색 테두리와 에러 메시지가 표시됩니다.

#### 설치 유형
가구가 설치될 환경의 유형을 선택합니다.

- **빌트인**: 양쪽 모두 벽면이 있는 형태
- **세미스탠딩**: 한쪽만 벽면이 있는 형태
- **프리스탠딩**: 양쪽 모두 벽면이 없는 독립형

#### 바닥 마감재 및 에어컨 단내림
바닥 마감재와 에어컨 단내림 설정은 기존과 동일하게 제공됩니다.

### 내부 설정 탭

기존 Step 2의 맞춤 설정 기능을 제공합니다.

#### 서라운드 및 받침대 설정
- **서라운드 타입**: 서라운드/노서라운드 선택
- **프레임 크기**: 좌측, 우측, 상단 프레임 크기 설정
- **받침대 설정**: 없음/받침대/띄움 타입 선택

### 가구 라이브러리

#### 가구 모듈 종류 (2025-06-05 업데이트)
**기본 수납 모듈**:
- 기본 수납장 (1칸): 선반 없는 오픈 스토리지
- 기본 수납장 (2칸): 2개 컬럼을 차지하는 오픈 스토리지

**선반형 모듈**:
- 2단 선반 (1칸): 1개의 중간 선반이 있는 2단 구조
- 2단 선반 (2칸): 양쪽에 각각 1개씩 중간 선반이 있는 구조
- **🆕 7단 선반 (1칸)**: 6개의 중간 선반이 있는 7단 구조 - 책이나 소품 수납에 최적
- **🆕 7단 선반 (2칸)**: 양쪽에 각각 6개씩 총 12개 선반이 있는 구조

#### 도어 설정
각 가구 모듈마다 도어 유무를 선택할 수 있습니다:
- **체크 상태**: 도어가 있는 가구로 배치
- **해제 상태**: 오픈형 가구로 배치
- **기본값**: 모든 가구가 도어 있는 상태로 설정

#### 드래그앤드롭 배치
- 가구 라이브러리에서 원하는 가구를 드래그하여 3D 공간의 원하는 위치에 드롭
- **싱글 가구**: 1개 컬럼을 차지하며, 드래그 시 1개 슬롯이 녹색으로 하이라이트
- **듀얼 가구**: 2개 컬럼을 차지하며, 드래그 시 연속된 2개 슬롯이 녹색으로 하이라이트
- 기존 가구가 있는 위치에 새 가구를 배치하면 기존 가구가 자동으로 제거됩니다.

## 2D/3D 뷰어 기능

### 2D 뷰어 (SVG 기반)
- **정확한 치수 표시**: 모든 치수가 밀리미터 단위로 정확하게 표시됩니다.
- **반응형 크기 조정**: 컨테이너 크기에 따라 SVG가 자동으로 크기 조정됩니다.
- **치수선 시스템**: 전문적인 건축 도면 스타일의 치수선으로 가독성이 뛰어납니다.
- **실시간 업데이트**: 설정 변경 시 즉시 반영됩니다.

### 3D 뷰어 (Three.js 기반)
- **카메라 모드 전환**: 
  - **3D 모드**: Perspective 카메라로 입체적인 뷰 제공
  - **2D 모드**: Orthographic 카메라로 평면적인 뷰 제공
- **마우스 컨트롤**:
  - **회전**: 마우스 드래그로 시점 변경 (3D 모드에서만)
  - **줌**: 마우스 휠로 확대/축소
    - 2D 모드: 줌 범위 10-50배 제한
    - 3D 모드: 거리 20-55 단위 제한
  - **팬**: 우클릭 드래그로 화면 이동
- **고급 시각 효과**:
  - **벽면 그라데이션**: 가구 근처는 어둡고 멀어질수록 밝아지는 깊이감 효과
  - **Fog 효과**: 자연스러운 깊이감과 경계선 제거
  - **실시간 재질**: 설정 변경 시 재질과 텍스처가 실시간으로 업데이트
- **성능 최적화**:
  - 재질 메모이제이션으로 불필요한 재생성 방지
  - 효율적인 렌더링 파이프라인

### 공통 기능
- **실시간 동기화**: 2D와 3D 뷰어가 동일한 데이터를 공유하여 일관된 표시
- **단계별 특화**: 각 단계에서 필요한 요소만 표시
- **자동 저장**: 모든 설정이 localStorage에 자동 저장되어 브라우저 종료 후에도 복원

### 사용 팁
1. **정확한 치수 확인**: 2D 뷰어에서 정확한 치수를 확인하세요.
2. **실제 모습 확인**: 3D 뷰어에서 실제 설치 모습을 미리 볼 수 있습니다.
3. **다양한 각도**: 3D 뷰어에서 마우스로 다양한 각도에서 확인해보세요.
4. **줌 활용**: 세부 사항 확인을 위해 줌 기능을 적극 활용하세요.
5. **모드 전환**: 2D/3D 모드를 자주 전환하여 다각도로 검토하세요. 