# 비펀(Befun) B2B SaaS 관리자 페이지 기능정의서

## 개요

B2B 형태의 SaaS 서비스 **비펀(Befun)**에 최적화된 관리자(Admin) 페이지의 메뉴를 설계합니다. 전체 시스템을 효율적으로 운영하고 고객(기업)별 계정을 관리하기 위해, 주요 메뉴와 하위 기능들을 구성했습니다.

---

## 1. 사용자 관리 (User Management)

### 1.1 조직(기업) 관리
**기능 설명:**
다수의 고객 **조직(테넌트)**을 등록하고 관리하는 기능입니다. 기업 계정별 프로필 정보를 확인하고, 현재 구독 플랜, 도메인, 담당자 등을 편집할 수 있습니다.

**목적:**
멀티 테넌트 환경에서 각 기업별 계정 현황을 한눈에 파악하고 조정할 수 있습니다.

**필수 요구사항:**
- [ ] 조직 목록 조회 (페이지네이션)
- [ ] 조직 상세 정보 조회/편집
- [ ] 조직별 구독 플랜 확인
- [ ] 조직 도메인 관리
- [ ] 조직 담당자 정보 관리

**선택 요구사항:**
- [ ] 조직별 태그/라벨 관리
- [ ] 조직 그룹핑 기능

---

### 1.2 팀 및 부서 관리
**기능 설명:**
조직 내에 팀이나 부서 단위의 그룹을 생성/편집하는 기능입니다. 기업 고객이 내부 사용자들을 팀별로 구분하여 권한을 달리하거나, 부서별로 서비스를 이용할 수 있게 합니다.

**목적:**
B2B 고객사의 조직 구조(예: 팀, 부서)에 맞춰 사용자들을 효율적으로 그룹화하고 관리합니다.

**필수 요구사항:**
- [ ] 팀/부서 생성 및 편집
- [ ] 팀/부서별 사용자 할당
- [ ] 팀/부서 계층 구조 관리
- [ ] 팀/부서별 권한 설정

**선택 요구사항:**
- [ ] 팀/부서 트리뷰 UI
- [ ] 팀/부서별 사용량 통계

---

### 1.3 사용자 목록 및 검색
**기능 설명:**
모든 사용자 계정을 조회하고 필터링할 수 있는 기능입니다. 조직별, 팀별, 권한별로 사용자를 검색하거나 정렬하여 특정 사용자를 빠르게 찾고 상태를 확인할 수 있습니다.

**목적:**
이메일, 이름, 역할 등으로 검색이 가능하며, 활성/비활성 계정 필터링도 제공합니다.

**필수 요구사항:**
- [ ] 사용자 목록 조회 (페이지네이션)
- [ ] 다중 필터 (조직, 팀, 권한, 상태)
- [ ] 검색 기능 (이름, 이메일)
- [ ] 정렬 기능
- [ ] 활성/비활성 필터링

**선택 요구사항:**
- [ ] 엑셀 다운로드
- [ ] 사용자 일괄 작업

---

### 1.4 사용자 초대 및 승인
**기능 설명:**
신규 사용자를 해당 조직에 **초대(invite)**하거나, 가입 요청을 승인/거절하는 기능입니다.

**목적:**
조직 관리자는 동료에게 초대 링크를 발송하거나, 도메인 기반 자동 가입 시 관리자가 확인 후 승인하도록 지원합니다. 기업 내 사용자 온보딩 과정을 관리하고, 무분별한 가입을 통제합니다.

**필수 요구사항:**
- [ ] 사용자 초대 링크 생성
- [ ] 초대 이메일 발송
- [ ] 가입 요청 승인/거절
- [ ] 초대 현황 확인

**선택 요구사항:**
- [ ] 도메인 기반 자동 승인 규칙
- [ ] 초대 만료 시간 설정

---

### 1.5 역할 및 권한 관리
**기능 설명:**
**역할 기반 액세스 제어(RBAC)**를 지원하여 사용자별 역할(예: 조직 관리자, 팀 관리자, 일반 사용자 등)을 지정하고 세부 권한을 관리합니다.

**목적:**
각 역할에 따라 접근 가능한 기능과 데이터 범위를 설정하며, 필요시 커스텀 역할을 생성할 수 있습니다. 원칙에 따른 최소 권한만 부여하여 보안성을 높이고 잘못된 접근을 방지합니다.

**필수 요구사항:**
- [ ] 기본 역할 정의 (Super Admin, Admin, User)
- [ ] 역할별 권한 매트릭스 설정
- [ ] 사용자별 역할 할당
- [ ] 권한 검증 로직

**선택 요구사항:**
- [ ] 커스텀 역할 생성
- [ ] 세분화된 권한 설정 (리소스 레벨)
- [ ] 역할 템플릿 기능

---

### 1.6 계정 상태 관리
**기능 설명:**
개별 사용자 계정의 상태를 변경하는 기능입니다. 예를 들어 계정 비활성화/활성화, 비밀번호 초기화, 이메일 인증 상태 확인, 계정 잠금(보안상 의심 활동 시) 등을 다룹니다.

**목적:**
문제 계정에 신속히 조치하고 보안을 유지할 수 있습니다.

**필수 요구사항:**
- [ ] 계정 활성화/비활성화
- [ ] 비밀번호 초기화
- [ ] 이메일 인증 상태 확인
- [ ] 계정 잠금/해제

**선택 요구사항:**
- [ ] 계정 일시 정지 (기간 설정)
- [ ] 의심 활동 자동 감지 및 잠금

---

## 2. 결제 및 구독 관리 (Billing & Subscription Management)

### 2.1 구독 플랜 현황
**기능 설명:**
각 고객 조직이 어떤 **요금제(플랜)**를 사용 중인지 확인하고 관리합니다. 구독 시작일, 종료일(만료일)과 구독 상태(체험판, 활성 구독, 취소 등)를 표시합니다.

**목적:**
기업별 구독 현황을 한눈에 파악하고, 필요에 따라 관리자가 특정 조직의 플랜을 변경(업그레이드/다운그레이드)하거나 연장할 수 있습니다.

**필수 요구사항:**
- [ ] 조직별 구독 플랜 조회
- [ ] 구독 상태 확인 (활성, 체험, 만료, 취소)
- [ ] 구독 시작일/종료일 표시
- [ ] 플랜 변경 기능 (업그레이드/다운그레이드)

**선택 요구사항:**
- [ ] 구독 연장 기능
- [ ] 만료 예정 알림

---

### 2.2 결제 상태 및 내역
**기능 설명:**
모든 고객의 결제 이력과 현재 결제 상태를 모니터링합니다. 각 조직별로 최근 결제일, 결제 주기(월간/연간), 결제 금액, 성공/실패 여부, 다음 결제 예정일 등을 확인할 수 있습니다.

**목적:**
미결제나 실패한 결제 건을 파악하여 조치하고, 수입 흐름을 추적합니다.

**필수 요구사항:**
- [ ] 결제 내역 목록 조회
- [ ] 결제 상태 필터링 (성공, 실패, 대기)
- [ ] 조직별 결제 이력 조회
- [ ] 다음 결제 예정일 표시

**선택 요구사항:**
- [ ] 결제 실패 자동 알림
- [ ] 결제 재시도 기능

---

### 2.3 자동 갱신 설정
**기능 설명:**
구독의 자동 연장(자동 갱신) 여부를 관리합니다. 고객 조직별로 자동 갱신이 활성화되어 있는지 표시하고, 필요 시 이를 수동으로 on/off 전환하거나 만료 알림 일정을 조정할 수 있습니다.

**목적:**
갱신 실수나 의도치 않은 갱신을 방지하고 고객과의 계약을 효율적으로 운영합니다.

**필수 요구사항:**
- [ ] 자동 갱신 상태 확인
- [ ] 자동 갱신 on/off 토글
- [ ] 만료 알림 일정 설정

**선택 요구사항:**
- [ ] 갱신 전 확인 이메일 발송

---

### 2.4 사용량 기반 제한 및 과금
**기능 설명:**
플랜에 따라 정해진 사용량 한도(예: 사용자 수, 저장 공간, API 호출량 등)를 관리합니다.

**목적:**
각 조직의 현재 사용량을 모니터링하고, 한도 초과 시 알림 발송 또는 추가 과금 처리를 지원합니다. 초과 사용량에 대한 업셀(up-sell) 기회 포착이나, 일정 기간 초과 허용 등의 정책 적용을 통해 고객 이용을 유연하게 대처합니다.

**필수 요구사항:**
- [ ] 플랜별 사용량 한도 설정
- [ ] 조직별 현재 사용량 모니터링
- [ ] 한도 초과 알림
- [ ] 초과 사용량 과금 로직

**선택 요구사항:**
- [ ] 사용량 그래프 시각화
- [ ] 임계값 도달 시 자동 알림

---

### 2.5 결제 수단 관리
**기능 설명:**
각 조직의 결제 수단 정보(예: 신용카드, 은행계좌, 구매 주문서 등)를 확인하고 업데이트할 수 있습니다.

**목적:**
결제 수단 만료나 변경이 필요한 경우 관리자가 직접 정보를 수정하거나, 고객에게 갱신을 요청할 수 있습니다.

**필수 요구사항:**
- [ ] 결제 수단 목록 조회
- [ ] 결제 수단 추가/삭제
- [ ] 결제 수단 만료 확인
- [ ] 기본 결제 수단 설정

**선택 요구사항:**
- [ ] 결제 수단 만료 예정 알림

---

### 2.6 프로모션/할인 코드 적용
**기능 설명:**
마케팅이나 영업 프로모션을 위해 발행된 쿠폰/할인 코드를 구독에 적용하거나 관리하는 기능입니다.

**목적:**
특정 조직에 할인 코드를 적용하여 할인된 금액으로 결제되도록 설정하거나, 프로모션 코드의 유효 기간 및 사용 횟수를 관리합니다. 마케팅 캠페인 효과를 반영하고 특별 조건의 계약을 운영할 수 있습니다.

**필수 요구사항:**
- [ ] 프로모션 코드 생성
- [ ] 할인율/금액 설정
- [ ] 유효 기간 설정
- [ ] 사용 횟수 제한
- [ ] 조직별 코드 적용

**선택 요구사항:**
- [ ] 코드 사용 통계
- [ ] 일괄 코드 생성

---

### 2.7 환불 및 구독 취소 처리
**기능 설명:**
고객의 구독 취소 요청이나 환불 이슈를 처리하는 기능입니다.

**목적:**
결제 금액을 부분 또는 전부 환불하고 구독을 중지하거나, 중도 해지 시 환불 정책에 따른 금액 정산을 수행합니다. 고객 지원 및 결제 분쟁에 신속히 대응하고 정확한 정산을 보장합니다.

**필수 요구사항:**
- [ ] 구독 취소 처리
- [ ] 환불 금액 계산
- [ ] 환불 처리 (전액/부분)
- [ ] 환불 내역 기록

**선택 요구사항:**
- [ ] 환불 정책 자동 적용
- [ ] 취소 사유 수집

---

## 3. 플랜/기능 관리 (Plan & Feature Management)

### 3.1 요금제 정의 및 수정
**기능 설명:**
서비스의 요금제(플랜) 종류를 생성하고 편집하는 기능입니다.

**목적:**
각 플랜의 명칭, 가격, 기간(월별/연별), 포함되는 기본 용량/한도를 설정합니다. 새로운 상품 출시나 가격 변경 시 이를 반영하여 제품의 패키징 전략을 유연하게 조정할 수 있습니다.

**필수 요구사항:**
- [ ] 플랜 생성/수정/삭제
- [ ] 플랜 명칭 설정
- [ ] 가격 설정 (월별/연별)
- [ ] 기본 용량/한도 설정

**선택 요구사항:**
- [ ] 플랜 복사 기능
- [ ] 플랜 버전 관리

---

### 3.2 플랜별 기능 제공 설정
**기능 설명:**
**기능 토글(feature toggle)**을 통해 각 플랜에 어떤 기능들을 포함할지 세부적으로 설정합니다.

**목적:**
고급 보고서 기능은 상위 플랜에만 제공하도록 설정하거나, 특정 API 접근은 엔터프라이즈 플랜에만 허용하는 식으로 플랜별 기능 매트릭스를 관리하고, 업셀링 포인트를 명확히 합니다.

**필수 요구사항:**
- [ ] 기능 목록 정의
- [ ] 플랜별 기능 매핑
- [ ] 기능 활성화/비활성화 토글

**선택 요구사항:**
- [ ] 기능 그룹핑
- [ ] 기능별 설명/문서

---

### 3.3 플랜별 사용 한도 설정
**기능 설명:**
플랜마다 사용량 제한을 정의하는 기능입니다.

**목적:**
기본 플랜은 사용자 계정 50개까지, 프로 플랜은 200개까지 생성 가능하도록 하거나, API 호출은 월 1만 회까지 등 자원 사용 한도를 설정합니다. 이 한도 정보는 결제/구독 관리의 사용량 모니터링과 연계됩니다.

**필수 요구사항:**
- [ ] 플랜별 사용량 한도 정의
- [ ] 한도 항목 설정 (사용자 수, 저장공간, API 호출 등)
- [ ] 한도 검증 로직

**선택 요구사항:**
- [ ] 한도별 알림 임계값 설정

---

### 3.4 커스터마이징/맞춤 플랜
**기능 설명:**
개별 기업 고객을 위한 맞춤형 플랜을 설정할 수 있는 기능입니다.

**목적:**
표준 플랜에 없지만 특정 고객에게 약속된 커스텀 기능 활성화, 특별 할인 가격, 추가 사용자 허용 등 예외 조건을 부여합니다. 대기업이나 특별 계약 고객에 대한 요구사항을 유연하게 반영하고 관리합니다.

**필수 요구사항:**
- [ ] 조직별 맞춤 플랜 생성
- [ ] 커스텀 가격 설정
- [ ] 커스텀 기능 활성화
- [ ] 커스텀 한도 설정

**선택 요구사항:**
- [ ] 맞춤 플랜 템플릿
- [ ] 맞춤 플랜 승인 프로세스

---

### 3.5 무료 체험(Trial) 정책
**기능 설명:**
신규 고객을 위한 무료 체험 플랜의 기간과 제공 기능을 설정합니다.

**목적:**
체험 기간 14일, 이용 가능한 기능 범위, 체험 종료 시 자동 전환 여부 등을 정의합니다. 잠재 고객이 제품을 충분히 평가할 수 있게 하면서, 체험 후 유료 전환을 자연스럽게 유도합니다.

**필수 요구사항:**
- [ ] 체험 기간 설정
- [ ] 체험 플랜 기능 범위 설정
- [ ] 체험 종료 시 처리 로직

**선택 요구사항:**
- [ ] 체험 연장 기능
- [ ] 체험 종료 알림

---

### 3.6 기능 릴리즈 제어(Feature Flag)
**기능 설명:**
새로운 기능을 출시할 때 일괄 공개하지 않고, 특정 고객이나 플랜에만 단계적으로 노출하는 기능입니다.

**목적:**
베타 기능을 일부 고객에게만 활성화하거나, 위험도가 있는 업데이트를 점진적으로 적용하여 안정성을 확인합니다. 제품 출시를 관리하고 이슈 발생 시 영향을 최소화합니다.

**필수 요구사항:**
- [ ] 기능 플래그 정의
- [ ] 조직/플랜별 기능 활성화
- [ ] 기능 플래그 on/off 토글

**선택 요구사항:**
- [ ] A/B 테스트 지원
- [ ] 점진적 롤아웃 (%)

---

## 4. 기업/조직 단위 대시보드 (Organization-Level Dashboard)

### 4.1 조직별 요약 대시보드
**기능 설명:**
선택한 개별 기업(조직)의 전반적인 현황을 보여주는 대시보드입니다.

**목적:**
해당 조직의 총 사용자 수, 활성 사용자 비율, 현재 구독 플랜과 남은 기간, 최근 로그인 또는 활동일, 사용 중인 주요 기능 통계 등을 한눈에 확인합니다. 고객사별 건강도와 활용도를 모니터링하고, 지원이나 업셀 기회를 파악합니다.

**필수 요구사항:**
- [ ] 조직 기본 정보 표시
- [ ] 총 사용자 수/활성 사용자 비율
- [ ] 현재 구독 플랜 및 남은 기간
- [ ] 최근 활동일
- [ ] 주요 기능 사용 통계

**선택 요구사항:**
- [ ] 건강도 스코어 표시
- [ ] 활용도 그래프

---

### 4.2 팀/부서별 데이터 필터링
**기능 설명:**
조직 대시보드 내에서 팀 또는 부서별로 데이터를 필터링하는 기능입니다.

**목적:**
대기업 고객의 경우 여러 부서가 SaaS를 이용하므로, 부서별 활성 사용자 수, 기능 사용량, 과금 내역 등을 구분해 볼 수 있습니다. 조직 내부의 활용 현황을 세분하여 파악하고, 특정 팀에 국한된 이슈나 요구에 대응하기 쉽습니다.

**필수 요구사항:**
- [ ] 팀/부서별 필터링
- [ ] 팀/부서별 사용자 수 표시
- [ ] 팀/부서별 사용량 표시

**선택 요구사항:**
- [ ] 팀/부서 비교 차트

---

### 4.3 도메인 기반 그룹핑
**기능 설명:**
고객 조직을 이메일 도메인 또는 자회사 단위로 그룹핑/분석하는 기능입니다.

**목적:**
한 기업이 여러 자회사나 지사 계정을 운영하는 경우, 동일한 이메일 도메인을 가진 사용자 그룹으로 묶어서 통계를 볼 수 있습니다. 여러 계정에 걸친 기업의 전체적인 사용량이나 패턴을 파악하고, 그룹 단위의 계약을 관리할 수 있습니다.

**필수 요구사항:**
- [ ] 도메인 기반 조직 그룹핑
- [ ] 그룹별 통계 조회

**선택 요구사항:**
- [ ] 자회사/지사 관계 설정
- [ ] 그룹 계층 구조 시각화

---

### 4.4 조직별 활동 피드
**기능 설명:**
선택한 조직의 최근 활동 로그 피드를 보여줍니다.

**목적:**
해당 기업의 사용자가 생성한 주요 이벤트(새 사용자 초대, 권한 변경, 결제 실패, 데이터 업로드 등)를 시간순으로 나타냅니다. 고객사의 서비스 이용 상황을 실시간으로 추적하여 이상 징후를 조기에 발견하거나, 고객 지원 시 근거 자료로 활용합니다.

**필수 요구사항:**
- [ ] 조직별 활동 로그 조회
- [ ] 시간순 정렬
- [ ] 이벤트 타입 필터링

**선택 요구사항:**
- [ ] 실시간 업데이트
- [ ] 이상 징후 자동 감지

---

### 4.5 고객사 상세 정보 및 노트
**기능 설명:**
조직별 페이지에서 그 회사와 관련된 상세 정보(계약 조건, SLA, 업종 등)와 내부 메모를 확인할 수 있습니다.

**목적:**
영업/지원 팀이 해당 고객사와 나눈 특별 약속이나 유의사항을 공유하고, 고객 맥락에 맞는 대응을 할 수 있게 합니다.

**필수 요구사항:**
- [ ] 조직 상세 정보 표시
- [ ] 내부 메모 작성/편집
- [ ] 계약 조건 기록

**선택 요구사항:**
- [ ] SLA 추적
- [ ] 업종별 분류

---

## 5. 운영자 도구 (Operator Tools)

### 5.1 시스템 로그 모니터링
**기능 설명:**
서비스 전반의 시스템 로그를 조회하고 추적하는 도구입니다.

**목적:**
로그인 기록, 오류 발생 로그, 주요 이벤트(데이터 생성/삭제 등)를 시간순으로 확인하고, 사용자 ID나 이벤트 종류로 필터링 검색할 수 있습니다. 운영자가 실시간으로 서비스 동작을 모니터링하고 문제 발생 시 신속히 진단할 수 있습니다.

**필수 요구사항:**
- [ ] 시스템 로그 조회
- [ ] 시간순 정렬
- [ ] 필터링 (사용자 ID, 이벤트 타입)
- [ ] 로그 레벨별 필터링 (Info, Warning, Error)

**선택 요구사항:**
- [ ] 실시간 로그 스트리밍
- [ ] 로그 검색 (키워드)

---

### 5.2 내부 운영자 계정 및 권한 관리
**기능 설명:**
SaaS 운영을 담당하는 내부 관리자 계정들을 관리하는 기능입니다.

**목적:**
회사 직원 중 슈퍼 관리자, 기술지원 담당, 영업 담당 등 내부 역할을 정의하고 권한을 부여합니다. 각 내부 운영자에게 접근 허용 범위를 달리하여 직원별 책임과 권한을 명확히 구분합니다.

**필수 요구사항:**
- [ ] 내부 운영자 계정 생성/편집
- [ ] 내부 역할 정의
- [ ] 내부 권한 매트릭스 설정

**선택 요구사항:**
- [ ] 운영자 활동 로그
- [ ] 운영자 권한 승인 워크플로우

---

### 5.3 콘텐츠/기능 노출 제어
**기능 설명:**
필요에 따라 특정 콘텐츠나 기능의 사용자 노출을 제한하거나 일시적으로 숨기는 도구입니다.

**목적:**
공지 전까지 숨겨야 할 신규 기능, 정책상 노출이 중단된 콘텐츠, 혹은 장애가 발생한 모듈을 임시로 비활성화할 때 사용합니다. 문제 발생 시 피해를 최소화하고, 규제 또는 계약에 따른 콘텐츠 제한 요구에도 대응할 수 있습니다.

**필수 요구사항:**
- [ ] 기능/콘텐츠 노출 on/off
- [ ] 긴급 비활성화 기능

**선택 요구사항:**
- [ ] 예약 노출/숨김
- [ ] 조건부 노출 (플랜, 조직별)

---

### 5.4 유저 화면 가장(임퍼소네이션)
**기능 설명:**
운영자가 특정 고객 사용자나 관리자 계정으로 가장하여 그들의 화면을 그대로 볼 수 있는 기능입니다.

**목적:**
고객이 보고한 이슈를 재현하거나 사용 환경을 확인하기 위해, 운영자가 해당 권한으로 로그인한 것처럼 동작합니다. 지원 요청에 대한 정확한 문제 진단과 고객 안내를 도와주며, 권한 남용 방지를 위해 모든 가장 행위를 로그에 기록합니다.

**필수 요구사항:**
- [ ] 사용자 가장 기능
- [ ] 가장 활동 로그 기록
- [ ] 가장 종료 기능

**선택 요구사항:**
- [ ] 가장 시간 제한
- [ ] 가장 승인 프로세스

---

### 5.5 데이터 유지/정정 도구
**기능 설명:**
운영자의 특별 권한으로 데이터를 직접 수정하거나 유지관리하는 기능입니다.

**목적:**
잘못 입력된 고객사명 수정, 비정상 상태의 구독 플래그 리셋, 테스트 데이터 삭제 등 일반 UI에서는 노출되지 않는 관리 작업을 수행합니다. 예외적인 상황에 신속 대응하고 데이터의 일관성을 유지할 수 있습니다.

**필수 요구사항:**
- [ ] 데이터 직접 수정 기능
- [ ] 수정 이력 로그 기록
- [ ] 수정 권한 제한

**선택 요구사항:**
- [ ] 수정 승인 프로세스
- [ ] 데이터 백업/복원

---

## 6. 마케팅/알림 기능 (Marketing & Notifications)

### 6.1 푸시 알림 발송 관리
**기능 설명:**
서비스 이용자들에게 푸시 알림(모바일 푸시 또는 웹 알림)을 보내는 기능입니다.

**목적:**
신규 기능 출시 공지, 서비스 이용 리마인더, 프로모션 정보 등을 작성하여 대상 사용자 그룹에 발송합니다. 특정 플랜 사용자나 최근 활동이 감소한 사용자를 선정해 푸시를 보내어 재참여를 유도하거나 공지를 전달할 수 있습니다.

**필수 요구사항:**
- [ ] 푸시 알림 작성
- [ ] 대상 그룹 선택 (플랜, 조직, 활동도)
- [ ] 푸시 발송
- [ ] 발송 결과 확인

**선택 요구사항:**
- [ ] 푸시 예약 발송
- [ ] A/B 테스트

---

### 6.2 이메일 템플릿 관리
**기능 설명:**
서비스에서 자동 발송되는 다양한 이메일의 템플릿을 관리하는 기능입니다.

**목적:**
환영 이메일, 비밀번호 재설정, 결제 영수증, 구독 갱신 알림 등 각 시나리오별 이메일 내용을 편집하여 브랜드에 맞는 메시지와 디자인을 유지합니다. 변수(placeholders)를 사용하여 개인화된 내용 삽입이 가능하며, 테스트 발송으로 템플릿이 올바르게 동작하는지 확인할 수 있습니다.

**필수 요구사항:**
- [ ] 이메일 템플릿 목록
- [ ] 템플릿 편집 (HTML/텍스트)
- [ ] 변수 삽입 기능
- [ ] 테스트 발송

**선택 요구사항:**
- [ ] 템플릿 버전 관리
- [ ] 다국어 템플릿

---

### 6.3 캠페인 및 일괄 공지
**기능 설명:**
마케팅 캠페인이나 전체 공지 사항을 대량 발송하는 기능입니다.

**목적:**
신규 기능 업데이트 소식을 모든 고객 관리자에게 이메일로 보내거나, 특정 요금제 고객에게 업그레이드 혜택을 안내하는 캠페인을 설정합니다. 발송 대상을 플랜, 가입일, 이용 빈도 등의 조건으로 세분화할 수 있어 타겟 마케팅이 가능하며, 발송 결과(오픈율, 클릭율)도 추적합니다.

**필수 요구사항:**
- [ ] 캠페인 생성
- [ ] 대상 세분화 (플랜, 가입일, 활동도)
- [ ] 이메일 작성 및 발송
- [ ] 발송 결과 추적 (오픈율, 클릭율)

**선택 요구사항:**
- [ ] 캠페인 자동화
- [ ] A/B 테스트

---

### 6.4 알림 환경 설정
**기능 설명:**
서비스 전반의 알림 채널 및 빈도를 설정하는 메뉴입니다.

**목적:**
하루 최대 이메일 발송 횟수 제한, 야간 시간대 푸시알림 차단, 특정 이벤트에 대한 알림 ON/OFF 등을 조정합니다. 과도한 알림을 방지하고 사용자 경험을 해치지 않으면서도 필요한 정보는 전달되도록 균형을 맞춥니다. 또한 주요 알림 이벤트에 대해서는 관리자 승인 후 발송되도록 워크플로우를 구성할 수 있습니다.

**필수 요구사항:**
- [ ] 알림 채널 설정 (이메일, 푸시, SMS)
- [ ] 발송 빈도 제한
- [ ] 시간대별 발송 제한
- [ ] 이벤트별 알림 on/off

**선택 요구사항:**
- [ ] 알림 승인 워크플로우
- [ ] 사용자별 알림 설정 오버라이드

---

## 7. 고객 지원 도구 (Customer Support Tools)

### 7.1 문의 티켓 조회 및 응답
**기능 설명:**
고객으로부터 접수된 문의사항/지원 티켓 목록을 확인하고 관리하는 기능입니다.

**목적:**
티켓의 제목, 내용, 요청자, 긴급도, 등록 시각, 상태(진행 중/완료)를 보여주고 필터링합니다. 운영자는 각 티켓에 댓글 형태로 직접 답변하거나, 필요한 경우 내부 담당 부서에 협조를 요청할 수 있습니다. 모든 고객 문의를 체계적으로 추적하고 적시에 대응합니다.

**필수 요구사항:**
- [ ] 티켓 목록 조회
- [ ] 티켓 상태 관리 (대기, 진행중, 완료)
- [ ] 티켓 응답/댓글
- [ ] 긴급도 설정
- [ ] 필터링 (상태, 조직, 담당자)

**선택 요구사항:**
- [ ] 티켓 자동 분류
- [ ] SLA 추적

---

### 7.2 이슈/버그 추적 관리
**기능 설명:**
서비스 이용 중 보고된 버그나 기술 이슈를 기록하고 처리 상태를 관리하는 기능입니다.

**목적:**
고객 문의 중 버그로 확인된 사항은 별도의 이슈로 분류하고, 우선순위와 책임자를 지정하여 해결 과정을 추적합니다. 버전별 패치 상황이나 임시 해결 방법 등을 기록해 두고, 동일한 문제로 문의하는 고객들에게 신속히 공지하거나 해결 시점을 공유할 수 있습니다.

**필수 요구사항:**
- [ ] 이슈/버그 등록
- [ ] 우선순위 설정
- [ ] 책임자 지정
- [ ] 이슈 상태 추적
- [ ] 해결 방법 기록

**선택 요구사항:**
- [ ] 이슈 템플릿
- [ ] 관련 티켓 연결

---

### 7.3 내부 메모 및 이력 관리
**기능 설명:**
각 고객 티켓이나 고객 프로필에 운영자 내부 메모를 남기고, 이전 대응 이력을 볼 수 있는 기능입니다.

**목적:**
"이 고객은 이전에 기능 A 관련 문의를 여러 차례 함", "지난 통화에서 임시 해결책 제공" 등의 메모를 남겨 두어, 다른 지원 담당자도 참고하게 합니다. 지원 업무의 연속성을 유지하고, 고객이 반복 설명하지 않도록 일관된 대응을 제공합니다.

**필수 요구사항:**
- [ ] 내부 메모 작성/편집
- [ ] 대응 이력 조회
- [ ] 메모 검색

**선택 요구사항:**
- [ ] 메모 카테고리화
- [ ] 메모 태그

---

### 7.4 티켓 담당자 지정 및 협업
**기능 설명:**
들어온 문의에 대해 처리 담당자를 지정하고 팀 내 협업을 지원하는 기능입니다.

**목적:**
특정 티켓을 기술지원팀으로 이관하거나, 세일즈 담당자에게 할당하는 등 업무를 분배합니다. 또한 티켓에 멘션(@) 기능이나 상태 변경(진행 중, 대기, 해결) 표시를 제공하여 지원팀이 함께 효율적으로 문제를 해결하도록 돕습니다. 다수의 지원 인력이 동시에 일할 때 혼선을 줄여줍니다.

**필수 요구사항:**
- [ ] 담당자 지정
- [ ] 팀/부서 이관
- [ ] 상태 변경
- [ ] 협업 코멘트

**선택 요구사항:**
- [ ] 멘션(@) 기능
- [ ] 티켓 자동 배분

---

### 7.5 고객 만족도 및 피드백
**기능 설명:**
지원 종료 후 고객 만족도 설문이나 피드백을 확인하는 기능입니다.

**목적:**
티켓별로 별점이나 코멘트 형태로 받은 만족도 평가를 모니터링하고, 낮은 평가의 경우 원인을 분석하여 개선 조치를 기록합니다. 지원 품질을 측정하고 교육이나 프로세스 개선에 활용할 수 있습니다.

**필수 요구사항:**
- [ ] 만족도 설문 발송
- [ ] 만족도 결과 조회
- [ ] 피드백 수집

**선택 요구사항:**
- [ ] 만족도 통계 분석
- [ ] 낮은 평가 자동 알림

---

## 8. 통계 분석 (Analytics & Reporting)

### 8.1 사용자 활동 통계
**기능 설명:**
서비스 전반의 사용자 활동 지표를 제공합니다.

**목적:**
일별/월별 활성 사용자 수(DAU/MAU), 로그인 빈도, 주요 기능별 사용 횟수 등의 데이터를 차트로 시각화합니다. 사용자 참여도와 기능 활용도를 분석하고, 어떤 기능이 인기있는지 혹은 사용이 저조한지를 파악하여 제품 개선에 반영합니다.

**필수 요구사항:**
- [ ] DAU/MAU 통계
- [ ] 로그인 빈도 분석
- [ ] 기능별 사용 횟수
- [ ] 차트 시각화

**선택 요구사항:**
- [ ] 코호트 분석
- [ ] 트렌드 분석

---

### 8.2 가입 및 구독 전환 분석
**기능 설명:**
신규 가입에서 유료 구독에 이르는 **고객 전환 흐름(funnel)**을 분석합니다.

**목적:**
한 달간 회원가입한 사용자 수, 그 중 무료 체험을 시작한 비율, 체험 후 유료 플랜으로 전환한 비율 등을 단계별로 보여줍니다. 이 전환율 지표를 통해 마케팅 및 온보딩 프로세스의 효율성을 측정하고, 어디서 이탈자가 발생하는지 찾아내어 개선할 수 있습니다.

**필수 요구사항:**
- [ ] 가입 퍼널 분석
- [ ] 체험 전환율
- [ ] 유료 전환율
- [ ] 단계별 이탈률

**선택 요구사항:**
- [ ] 전환 경로 시각화
- [ ] 이탈 원인 분석

---

### 8.3 전환율 및 매출 지표
**기능 설명:**
마케팅 캠페인이나 제품 기능별 전환율을 상세히 보여줍니다.

**목적:**
이메일 캠페인 클릭 대비 회원가입 전환율, 무료 플랜에서 유료 플랜으로의 업그레이드 비율, 특정 기능 사용자가 해당 유료 애드온을 구매한 비율 등이 포함됩니다. 또한 **월간 반복 매출(MRR)**이나 연간 반복 매출(ARR) 추이, 고객 평생 가치(LTV)와 **이탈률(Churn)**도 함께 추적하여 비즈니스 성장 지표를 모니터링합니다.

**필수 요구사항:**
- [ ] MRR/ARR 추이
- [ ] 업그레이드 전환율
- [ ] LTV 계산
- [ ] Churn Rate 추적

**선택 요구사항:**
- [ ] 캠페인별 전환율
- [ ] 기능별 구매 전환율

---

### 8.4 고객 유지율 및 잔존율 분석
**기능 설명:**
일정 기간 동안 고객이 서비스를 **계속 이용하는 비율(잔존율)**을 분석합니다.

**목적:**
월별 잔존율 또는 이탈률, 코호트 분석(특정 가입 시기의 고객군이 시간 경과에 따라 얼마나 남아있는지) 등을 제공합니다. 고객 유지 전략의 효과를 평가하고, 이탈이 많은 구간에서의 원인을 진단하여 대응책을 마련합니다.

**필수 요구사항:**
- [ ] 월별 유지율/이탈률
- [ ] 코호트 분석
- [ ] 잔존율 그래프

**선택 요구사항:**
- [ ] 이탈 예측 모델
- [ ] 리텐션 개선 제안

---

### 8.5 API 사용량 통계
**기능 설명:**
비펀에서 공개한 API의 사용 현황을 모니터링하는 기능입니다.

**목적:**
각 조직별 API 호출 횟수, 가장 자주 사용되는 API 엔드포인트, 응답 속도 및 오류율 등을 집계하여 보여줍니다. 고객의 기술적 연동 상황을 파악하고, 사용량이 많은 고객에게 상위 플랜 제안이나 성능 지원을 고려할 수 있습니다. 또한 API 오류율을 통해 시스템 안정성을 점검하고 이상치를 탐지합니다.

**필수 요구사항:**
- [ ] 조직별 API 호출 횟수
- [ ] 엔드포인트별 사용량
- [ ] 응답 속도 통계
- [ ] 오류율 추적

**선택 요구사항:**
- [ ] API 사용량 알림
- [ ] 성능 이상 감지

---

### 8.6 보고서 내보내기 및 커스터마이징
**기능 설명:**
위의 각종 분석 데이터를 CSV/PDF 등으로 익스포트하거나 기간/대상 등을 선택하여 커스텀 보고서를 생성하는 기능입니다.

**목적:**
정기적인 경영 보고나 고객사 미팅 자료로 활용할 수 있도록, 그래프와 표를 내보내고 필요시 자동 리포트 이메일 발송을 설정할 수 있습니다.

**필수 요구사항:**
- [ ] CSV/PDF 내보내기
- [ ] 기간 선택
- [ ] 커스텀 보고서 생성

**선택 요구사항:**
- [ ] 자동 리포트 이메일
- [ ] 보고서 템플릿

---

## 9. 보안 및 접근 설정 (Security & Access Settings)

### 9.1 이중 인증(2FA) 정책
**기능 설명:**
2단계 인증(MFA) 관련 설정을 관리합니다.

**목적:**
사용자의 계정 보안을 높이기 위해 이메일/비밀번호 로그인 외에 OTP, 인증 앱, SMS 등 이중 인증 방법을 적용할 수 있습니다. 관리자는 전체 사용자 또는 특정 권한 이상의 관리자에게 2FA 사용을 필수화하거나, 2FA 등록 현황을 모니터링합니다. 계정 도용을 방지하고 보안 사고 위험을 줄입니다.

**필수 요구사항:**
- [ ] 2FA 활성화/비활성화
- [ ] 2FA 방식 설정 (OTP, SMS, 앱)
- [ ] 2FA 필수화 정책
- [ ] 2FA 등록 현황 모니터링

**선택 요구사항:**
- [ ] 2FA 백업 코드
- [ ] 2FA 복구 프로세스

---

### 9.2 IP 주소 접근 제한
**기능 설명:**
보안 강화를 위해 허용된 IP 대역이나 국가에서만 시스템에 접근할 수 있도록 설정합니다.

**목적:**
내부 관리자 페이지는 회사 내정 IP에서만 접속 허용, 고객사의 경우 특정 사무실 IP만 허용 등으로 규정할 수 있습니다. 인증 정보 유출 시에도 무단 접속을 차단하는 추가 장치로서, 주로 보안 민감도가 높은 기업에서 요구하는 기능입니다.

**필수 요구사항:**
- [ ] IP 화이트리스트 설정
- [ ] 국가별 접근 제한
- [ ] IP 차단 로그

**선택 요구사항:**
- [ ] 동적 IP 허용
- [ ] VPN 접근 정책

---

### 9.3 관리자 활동 로그(Audit Log)
**기능 설명:**
관리자 및 시스템의 중요 행동을 모두 기록하는 감사 로그 기능입니다.

**목적:**
내부 운영자가 고객 데이터를 조회/변경한 내역, 권한 설정 변경, 대량 이메일 발송 지시, 설정 수정 등의 이벤트를 상세히 남깁니다. 각 로그에는 행위자, 시간, 대상, 변경 내용 등이 포함되어 추후 보안 사고 조사나 변경 이력 감사에 활용됩니다. 규제 준수 및 내부 통제에 필수적이며, 로그는 임의 수정되지 않도록 불변성 있게 저장됩니다.

**필수 요구사항:**
- [ ] 모든 관리자 활동 로그 기록
- [ ] 로그 조회 및 검색
- [ ] 로그 불변성 보장
- [ ] 로그 보존 기간 설정

**선택 요구사항:**
- [ ] 로그 분석 대시보드
- [ ] 이상 행위 자동 감지

---

### 9.4 접근 권한 세부 설정
**기능 설명:**
서비스 내 접근 제어 정책을 설정하는 메뉴입니다.

**목적:**
패스워드 보안 정책(복잡도 요구, 주기적 변경), 계정 잠금 기준(로그인 실패 횟수), 세션 타임아웃 시간 등을 조정하여 인증 및 세션 관리 규칙을 강화합니다. 또한 고객사별 요구에 따라 데이터 암호화 여부, 다운로드 권한 제한 등 세밀한 보안 옵션을 제공합니다. 업계 표준과 고객사 보안 요구사항을 충족합니다.

**필수 요구사항:**
- [ ] 패스워드 정책 설정
- [ ] 계정 잠금 정책
- [ ] 세션 타임아웃 설정
- [ ] 데이터 암호화 옵션

**선택 요구사항:**
- [ ] 조직별 보안 정책 커스터마이징
- [ ] 다운로드 권한 제한

---

### 9.5 Single Sign-On 통합(SSO)
**기능 설명:**
기업 고객이 **자사 아이덴티티 제공자(IdP)**와 연동하여 SSO로 로그인할 수 있도록 설정합니다.

**목적:**
SAML 또는 OAuth/OIDC 프로토콜을 지원하며, Okta, Azure AD, 구글 워크스페이스 등의 IdP 메타데이터를 받아 연동 구성을 합니다. SSO 설정을 통해 고객사는 자체 계정 관리를 유지하면서도 비펀 서비스를 이용할 수 있으며, **엔터프라이즈 요건(보안/편의)**을 충족하게 됩니다. 관리자는 조직별 SSO 활성화 상태와 연동 결과를 모니터링하고 문제 발생 시 진단 정보를 확인할 수 있습니다.

**필수 요구사항:**
- [ ] SAML/OAuth 연동 설정
- [ ] IdP 메타데이터 등록
- [ ] 조직별 SSO 활성화
- [ ] SSO 연동 상태 모니터링

**선택 요구사항:**
- [ ] SSO 진단 도구
- [ ] 다중 IdP 지원

---

### 9.6 외부 접근 및 API 키 관리
**기능 설명:**
외부에서 관리자 API로 시스템에 접근할 수 있는 경우(예: 관리자용 API), 그 API 접근 키 발급 및 권한을 관리합니다.

**목적:**
API 키 유효 기간, 권한 범위를 지정하고 분실 시 폐기하거나 재발급합니다. 외부 연동이나 자동화 스크립트가 관리자 권한으로 작동할 때 보안을 유지하고 추적 가능성을 확보합니다.

**필수 요구사항:**
- [ ] API 키 생성/폐기
- [ ] API 키 권한 범위 설정
- [ ] API 키 유효 기간 설정
- [ ] API 키 사용 로그

**선택 요구사항:**
- [ ] API 키 자동 로테이션
- [ ] API 키 사용량 통계

---

## 10. 설정 (Configuration Settings)

### 10.1 환경 변수 및 시스템 설정
**기능 설명:**
서비스 운영에 필요한 주요 환경 변수나 설정 값을 관리하는 메뉴입니다.

**목적:**
써드파티 서비스의 API Endpoint URL, 기능 플래그의 기본값, 시스템 모드(메인트넌스 모드 ON/OFF) 등의 설정을 UI 상에서 변경할 수 있습니다. 개발자나 운영자가 배포 없이도 설정을 조정하여 긴급한 대응이나 환경별 튜닝을 할 수 있습니다. 잘못된 설정 변경은 서비스에 영향이 크므로, 변경 시 확인 프로세스와 로그를 남겨 안전한 구성 관리를 돕습니다.

**필수 요구사항:**
- [ ] 환경 변수 목록
- [ ] 환경 변수 편집
- [ ] 메인트넌스 모드 설정
- [ ] 설정 변경 로그

**선택 요구사항:**
- [ ] 설정 변경 승인 프로세스
- [ ] 설정 백업/복원

---

### 10.2 외부 서비스 API 키 관리
**기능 설명:**
비펀 서비스가 연동하는 외부 서비스의 API 키나 인증 정보를 저장 및 관리합니다.

**목적:**
이메일 발송 서비스(SendGrid 등)의 API 키, 결제게이트웨이(Stripe 등) 비밀키, 소셜 로그인 API 키(Google, Facebook) 등을 안전하게 입력/보관합니다. 키 유효성이나 권한을 주기적으로 점검하고, 필요시 **로테이션(교체)**할 수 있습니다. 외부 통합 기능이 원활히 동작하고, 중요한 자격 정보가 중앙에서 안전하게 관리됩니다.

**필수 요구사항:**
- [ ] API 키 목록
- [ ] API 키 추가/삭제
- [ ] API 키 암호화 저장
- [ ] API 키 유효성 검증

**선택 요구사항:**
- [ ] API 키 자동 로테이션
- [ ] API 키 만료 알림

---

### 10.3 Webhook 및 통합 연동 설정
**기능 설명:**
고객사의 내부 시스템이나 서드파티 애플리케이션과 연동하기 위한 Webhook 설정을 관리합니다.

**목적:**
비펀에서 이벤트 발생 시 호출해야 할 외부 URL과 시크릿 토큰, 재시도 정책 등을 조직별로 등록할 수 있습니다. 예를 들어 "새 이슈 생성됨" 이벤트를 고객사의 Slack Webhook으로 보내는 식입니다. 또한 Zapier 등 타사 연동에 필요한 키나 설정도 이 메뉴에서 관리합니다. 서비스 외연을 확장하고, B2B 고객이 자사 시스템과 쉽게 통합하도록 지원합니다.

**필수 요구사항:**
- [ ] Webhook URL 등록
- [ ] 이벤트 타입 선택
- [ ] 시크릿 토큰 설정
- [ ] Webhook 테스트

**선택 요구사항:**
- [ ] 재시도 정책 설정
- [ ] Webhook 호출 로그

---

### 10.4 제품 동작 설정
**기능 설명:**
서비스의 전반적인 동작 모드나 기본값을 설정하는 메뉴입니다.

**목적:**
파일 업로드 허용 크기, 세션 타임아웃, 지역/타임존 기본값, UI 로케일(다국어 지원) 설정, 이메일 발신 주소/브랜드 로고 등 제품 정책 관련 설정을 조정합니다. 운영자가 제품 환경을 상황에 맞게 튜닝하고 일관된 브랜드 경험을 제공할 수 있습니다.

**필수 요구사항:**
- [ ] 파일 업로드 크기 제한
- [ ] 세션 타임아웃 설정
- [ ] 타임존 설정
- [ ] 다국어 설정

**선택 요구사항:**
- [ ] 브랜드 로고/색상 커스터마이징
- [ ] 이메일 발신 주소 설정

---

### 10.5 백업 및 복원 설정
**기능 설명:**
데이터베이스 자동 백업 주기 설정이나, 중요 데이터의 내보내기/가져오기 설정을 관리합니다.

**목적:**
서비스 장애나 데이터 훼손에 대비해 정기 백업을 설정하고, 필요시 복원 절차를 테스트합니다. 또한 고객사의 데이터 요구(예: 계약 종료 시 데이터 제공)를 위해 특정 조직 데이터의 Export 기능을 설정할 수 있습니다. 데이터 안정성을 높이고 비상시에 대비합니다.

**필수 요구사항:**
- [ ] 자동 백업 주기 설정
- [ ] 백업 파일 목록
- [ ] 데이터 복원 기능
- [ ] 조직 데이터 Export

**선택 요구사항:**
- [ ] 백업 암호화
- [ ] 복원 테스트 자동화

---

## 개발 우선순위

### Phase 1 (필수 - MVP)
- [ ] 관리자 인증 및 권한 체크
- [ ] 조직(기업) 관리
- [ ] 사용자 목록 및 검색
- [ ] 구독 플랜 현황
- [ ] 결제 상태 및 내역
- [ ] 기본 대시보드

### Phase 2 (중요)
- [ ] 팀 및 부서 관리
- [ ] 역할 및 권한 관리
- [ ] 플랜/기능 관리
- [ ] 조직별 요약 대시보드
- [ ] 문의 티켓 조회 및 응답
- [ ] 사용자 활동 통계
- [ ] 관리자 활동 로그

### Phase 3 (선택)
- [ ] 마케팅/알림 기능
- [ ] 고급 통계 분석
- [ ] SSO 통합
- [ ] Webhook 연동
- [ ] 실시간 업데이트
- [ ] 고급 필터링

---

## 기술 스택

### Frontend
- React 18 + TypeScript
- React Router (라우팅)
- Zustand (상태 관리)
- CSS Modules (스타일링)
- Chart.js / Recharts (차트)

### Backend
- Firebase Authentication (인증)
- Firestore (데이터베이스)
- Cloud Functions (서버리스 함수)
- Firebase Storage (파일 저장)

### 외부 연동
- Stripe (결제)
- SendGrid (이메일)
- Twilio (SMS - 선택)

---

## 라우팅 구조

```
/admin
├── /dashboard              # 전체 대시보드
├── /users                  # 사용자 관리
│   ├── /organizations      # 조직 관리
│   ├── /teams              # 팀/부서 관리
│   ├── /list               # 사용자 목록
│   └── /roles              # 역할 및 권한
├── /billing                # 결제 및 구독 관리
│   ├── /subscriptions      # 구독 현황
│   ├── /payments           # 결제 내역
│   └── /promotions         # 프로모션 코드
├── /plans                  # 플랜/기능 관리
│   ├── /list               # 요금제 목록
│   └── /features           # 기능 관리
├── /organizations/:id      # 조직별 대시보드
├── /support                # 고객 지원
│   ├── /tickets            # 티켓 관리
│   └── /issues             # 이슈/버그 추적
├── /marketing              # 마케팅/알림
│   ├── /notifications      # 푸시 알림
│   ├── /emails             # 이메일 템플릿
│   └── /campaigns          # 캠페인 관리
├── /analytics              # 통계 분석
│   ├── /users              # 사용자 통계
│   ├── /conversions        # 전환 분석
│   └── /revenue            # 매출 지표
├── /security               # 보안 및 접근 설정
│   ├── /2fa                # 이중 인증
│   ├── /ip-restrictions    # IP 제한
│   └── /audit-logs         # 감사 로그
└── /settings               # 설정
    ├── /system             # 시스템 설정
    ├── /integrations       # 외부 연동
    └── /backup             # 백업 및 복원
```

---

## 데이터베이스 스키마

### admins (관리자 권한)
```typescript
interface Admin {
  userId: string;
  role: 'super' | 'admin' | 'support' | 'sales';
  permissions: string[];
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

### organizations (조직)
```typescript
interface Organization {
  id: string;
  name: string;
  domain: string;
  planId: string;
  subscriptionStatus: 'trial' | 'active' | 'expired' | 'cancelled';
  subscriptionStartDate: Timestamp;
  subscriptionEndDate: Timestamp;
  ownerId: string;
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

### subscriptions (구독)
```typescript
interface Subscription {
  id: string;
  organizationId: string;
  planId: string;
  status: 'trial' | 'active' | 'expired' | 'cancelled';
  startDate: Timestamp;
  endDate: Timestamp;
  autoRenew: boolean;
  paymentMethodId: string;
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

### payments (결제 내역)
```typescript
interface Payment {
  id: string;
  organizationId: string;
  subscriptionId: string;
  amount: number;
  currency: string;
  status: 'success' | 'failed' | 'pending';
  paymentDate: Timestamp;
  nextPaymentDate: Timestamp;
  invoiceUrl: string;
  createdAt: Timestamp;
}
```

### plans (요금제)
```typescript
interface Plan {
  id: string;
  name: string;
  price: number;
  billingPeriod: 'monthly' | 'yearly';
  features: string[];
  limits: {
    users: number;
    storage: number;
    apiCalls: number;
  };
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

### auditLogs (감사 로그)
```typescript
interface AuditLog {
  id: string;
  adminId: string;
  action: string;
  targetType: 'user' | 'organization' | 'subscription' | 'system';
  targetId: string;
  details: object;
  timestamp: Timestamp;
  ipAddress: string;
}
```

---

## 보안 고려사항

### 인증 및 권한
- Firebase Authentication 활용
- 역할 기반 접근 제어(RBAC)
- 관리자 전용 라우팅 보호
- 세션 타임아웃 관리

### 데이터 보호
- Firestore Security Rules 설정
- 민감 정보 암호화
- API 키 안전한 저장
- 감사 로그 불변성 보장

### 네트워크 보안
- HTTPS 강제
- CORS 설정
- IP 화이트리스트 (선택)
- Rate Limiting

---

## 성능 최적화

### Frontend
- Code Splitting
- Lazy Loading
- 데이터 페이지네이션
- 가상 스크롤링 (대용량 목록)
- 이미지 최적화

### Backend
- Firestore 인덱스 최적화
- 쿼리 캐싱
- Cloud Functions 콜드 스타트 최소화
- 배치 작업 (대량 처리)

---

## 테스트 전략

### 단위 테스트
- 비즈니스 로직 테스트
- 유틸리티 함수 테스트
- 컴포넌트 테스트

### 통합 테스트
- API 엔드포인트 테스트
- Firebase 연동 테스트
- 권한 검증 테스트

### E2E 테스트
- 관리자 로그인 플로우
- 사용자 관리 플로우
- 구독 관리 플로우
- 결제 처리 플로우

---

## 배포 및 운영

### 환경 구성
- Development (개발)
- Staging (스테이징)
- Production (프로덕션)

### 모니터링
- Firebase Performance Monitoring
- Error Tracking (Sentry 등)
- 사용자 행동 분석 (Google Analytics 등)

### CI/CD
- GitHub Actions
- 자동 테스트 실행
- 자동 배포

---

## 변경 이력

| 날짜 | 버전 | 작성자 | 변경 내용 |
|------|------|--------|-----------|
| 2025-11-12 | 1.0 | - | 초기 작성 (상세 기능 정의) |
