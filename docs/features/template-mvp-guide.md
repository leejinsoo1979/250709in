# 템플릿 MVP 기능 가이드

## 개요

템플릿 MVP는 가구 디자인을 PDF 형식으로 내보내기 위한 강력한 템플릿 시스템입니다. 사용자는 다양한 뷰를 용지에 배치하고, 크기를 조정하며, 전문적인 PDF 문서를 생성할 수 있습니다.

## 주요 기능

### 1. PDF 템플릿 편집기
- **다중 뷰 지원**: 상단(TOP), 정면(Front), 측면(Side), 도어(Door), 우측(Right), 베이스(Base), ISO 뷰 등
- **드래그 앤 드롭**: 직관적인 인터페이스로 뷰를 용지에 배치
- **실시간 미리보기**: 벡터 및 래스터 모드 지원
- **다중 페이지**: 여러 페이지의 PDF 문서 생성 가능

### 2. 용지 설정
- **용지 크기**: A0, A1, A2, A3, A4, A5 지원
- **방향**: 가로(Landscape) 및 세로(Portrait) 모드
- **정확한 치수**: 표준 ISO 216 규격 준수

### 3. 뷰 조작
- **크기 조정**: 8방향 핸들을 통한 정밀한 크기 조정
- **회전**: 자유로운 각도 조정
- **정렬 가이드**: 자동 스냅 및 정렬선
- **계층 관리**: 뷰의 전후 관계 조정

### 4. 파일 업로드 지원
- **이미지 파일**: JPG, PNG, SVG
- **도면 파일**: DXF, PDF
- **썸네일 생성**: 자동 미리보기 이미지 생성

## 사용법

### 템플릿 편집기 열기
1. 프로젝트 편집 화면에서 "PDF 템플릿" 버튼 클릭
2. 템플릿 편집기가 모달로 열림

### 뷰 추가하기
1. 좌측 패널에서 원하는 뷰 선택
2. 드래그하여 용지에 배치
3. 또는 더블클릭으로 자동 배치

### 뷰 편집하기
- **이동**: 뷰를 클릭하고 드래그
- **크기 조정**: 모서리 핸들 드래그
- **회전**: 회전 핸들(상단 중앙) 드래그
- **삭제**: Delete 키 또는 우클릭 메뉴

### PDF 생성하기
1. 원하는 레이아웃 완성
2. "PDF 생성" 버튼 클릭
3. 파일 이름 자동 생성 (프로젝트명_날짜.pdf)

## 썸네일 사양

### 썸네일 생성 규격
- **크기**: 400x300px (4:3 비율)
- **형식**: PNG
- **배경**: 투명 또는 흰색
- **품질**: 고품질 (압축률 0.92)

### 썸네일 용도
- 템플릿 목록에서 미리보기
- 빠른 템플릿 선택
- 시각적 템플릿 관리

## 권한 및 제약사항

### 사용 권한
- **생성**: 모든 로그인 사용자
- **편집**: 템플릿 생성자 또는 프로젝트 멤버
- **조회**: 팀 멤버 전체
- **삭제**: 템플릿 생성자 또는 관리자

### 기술적 제약
- **최대 페이지 수**: 10페이지
- **최대 뷰 개수**: 페이지당 20개
- **파일 크기**: 업로드 파일 최대 10MB
- **지원 브라우저**: Chrome, Firefox, Safari, Edge (최신 버전)

### 성능 고려사항
- **벡터 모드**: 정확한 도면 표현, 처리 시간 증가
- **래스터 모드**: 빠른 미리보기, 품질 손실 가능
- **메모리 사용**: 복잡한 3D 뷰는 높은 메모리 사용

## 데이터 구조

### 템플릿 데이터 스키마
```typescript
interface TemplateData {
  id: string;
  name: string;
  description?: string;
  thumbnail?: string;
  paperSize: 'A0' | 'A1' | 'A2' | 'A3' | 'A4' | 'A5';
  orientation: 'landscape' | 'portrait';
  pages: ViewPosition[][];
  createdBy: string;
  createdAt: Date;
  updatedAt: Date;
  version: number;
}

interface ViewPosition {
  id: string;
  x: number;
  y: number;
  width: number;
  height: number;
  scale: number;
  rotation?: number;
  type?: 'view' | 'image' | 'pdf' | 'dxf';
  viewConfig?: any;
  visible?: boolean;
  hasDrawingData?: boolean;
}
```

## 마이그레이션 가이드

### 기존 프로젝트에서 템플릿 적용
1. 기존 프로젝트 열기
2. PDF 템플릿 편집기 실행
3. 저장된 템플릿 목록에서 선택
4. "템플릿 적용" 클릭
5. 필요시 추가 수정 후 저장

### 템플릿 버전 관리
- 각 템플릿은 버전 번호 포함
- 수정 시 자동 버전 증가
- 이전 버전 히스토리 보존

## 롤백 방법

### 템플릿 변경사항 되돌리기
1. 템플릿 히스토리 열기
2. 원하는 버전 선택
3. "이 버전으로 복원" 클릭
4. 확인 후 적용

### 긴급 롤백 절차
```bash
# Firebase에서 이전 버전 데이터 복구
# 1. Firebase Console 접속
# 2. Firestore > teams > [teamId] > templates > [templateId]
# 3. 이전 버전 데이터 확인
# 4. 수동 복원 또는 스크립트 실행
```

## 문제 해결

### 일반적인 문제
1. **PDF 생성 실패**
   - 브라우저 캐시 삭제
   - 페이지 새로고침
   - 복잡한 뷰 단순화

2. **뷰 렌더링 오류**
   - WebGL 지원 확인
   - 그래픽 드라이버 업데이트
   - 하드웨어 가속 활성화

3. **템플릿 저장 실패**
   - 네트워크 연결 확인
   - Firebase 권한 확인
   - 스토리지 용량 확인

### 지원 연락처
- 기술 지원: support@example.com
- 문서: https://docs.example.com
- 커뮤니티: https://community.example.com

## 향후 개선 계획

### 단기 (1-2개월)
- [ ] 템플릿 공유 기능
- [ ] 커스텀 용지 크기
- [ ] 자동 레이아웃 제안
- [ ] 배치(Batch) PDF 생성

### 중기 (3-6개월)
- [ ] AI 기반 레이아웃 최적화
- [ ] 협업 편집 기능
- [ ] 템플릿 마켓플레이스
- [ ] 고급 주석 도구

### 장기 (6개월+)
- [ ] CAD 파일 직접 편집
- [ ] 3D PDF 내보내기
- [ ] AR/VR 뷰어 통합
- [ ] 클라우드 렌더링